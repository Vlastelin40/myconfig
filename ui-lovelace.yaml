
title: Home - Main Server
views:
################################################################
# MAIN PAGE
################################################################
  - title: Main
    background: var(--background-image)
    icon: mdi:home
    columns: 4
    cards:
      # ##################################
      # Left Block
      # ##################################a
      - type: vertical-stack
        cards:
          - type: custom:stack-in-card
            mode: vertical
            cards:
              # - type: glance
              #   show_name: true
              #   show_state: true
              #   state_color: true
              #   columns: 4
              #   entities:
              #     - sensor.mi_kettle_temperature
              #     - counter.kettle_k
              #     - sensor.mi_kettle_state
              #     - sensor.mi_kettle_rssi
              - type: glance
                show_name: true
                show_state: true
                state_color: true
                columns: 7
                entities:
                  - entity: switch.air_freshener_spray
                    name: Spray
                    tap_action:
                      action: toggle
                  - entity: sensor.geiger_radiation_dose_per_hour
                    name: RA
                  - entity: binary_sensor.0x158d00035c6905_contact #binary_sensor.rain
                    name: Rain
                  - entity: sensor.pressure_indicator
                    name: Pressure
                  - entity: binary_sensor.bright_light_allowed
                    name: Br
                  - entity: input_boolean.dark_mode
                    name: Dark
                    tap_action:
                      action: toggle
                  - entity: input_boolean.silent_mode
                    name: Zz
                    tap_action:
                      action: toggle
              - type: glance
                show_name: true
                show_state: true
                state_color: true
                columns: 5
                entities:
                  # - entity: sensor.temperature_min_out
                  #   name: Tmin
                  # - entity: sensor.temperature_max_out
                  #   name: Tmax
                  - entity: sensor.zigbee_devices_unavailable
                    name: Z Offline
                  - entity: sensor.wifi_devices_unavailable
                    name: WF Offline
                  - entity: sensor.0x158d000239ad5b_temperature
                    name: Temp
                  - entity: sensor.esp32_node_mb_outside
                    name: Dallas
                  - entity: sensor.0x158d000239ad5b_humidity
                    name: Hum
              - type: glance
                show_name: true
                show_state: true
                state_color: true
                columns: 4
                entities:
                  - person.dima
                  - person.sandra
                  - person.vova
                  - entity: person.sasha
                    name: Sasha
                    tap_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.sasha_tracker
              - type: glance
                entities:
                  #- sensor.schlumberger
                  - entity: sensor.usd_rur
                    name: USD
                  - entity: sensor.eur_rur
                    name: EUR
          - type: map
            aspect_ratio: '16x9'
            default_zoom: 16
            hours_to_show: 24
            entities: 
              - person.dima
              - person.sandra
              - person.vova
          - type: custom:weather-card
            entity: weather.dark_sky #weather.gismeteo_daily
            icons: "/local/icons/"
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: glance
                columns: 6
                state_color: true
                entities:
                  - entity: sensor.cpu_package_temp #sensor.processor_temperature #sensor.cpu_package_temp
                    name: CPUT
                  - entity: sensor.ipmi_fan1
                    name: FAN1
                  - entity: sensor.processor_use #sensor.cpu_usage
                    name: CPU
                  - entity: sensor.memory_use_percent #sensor.ram_usage
                    name: RAM
                  - entity:  sensor.db_size
                    name: DB
                  - entity: sensor.influxdb_total_size
                    name: Influx
              - type: horizontal-stack
                cards:
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.ippon_1200_status
                        state_not: 'off'
                    card:
                      type: glance
                      columns: 1
                      state_color: true
                      entities:
                        - entity: sensor.ippon_1200_status_data
                          name: HB

                  - type: conditional
                    conditions:
                      - entity: binary_sensor.ippon_1050_status
                        state_not: 'off'
                    card:
                      type: glance
                      columns: 1
                      state_color: true
                      entities:
                        - entity: sensor.ippon_1050_status_data
                          name: MB

                  - type: conditional
                    conditions:
                      - entity: binary_sensor.cyber650_k_status
                        state_not: 'off'
                    card:
                      type: glance
                      columns: 1
                      state_color: true
                      entities:
                        - entity: sensor.cyber650_k_status_data
                          name: K

                  - type: conditional
                    conditions:
                      - entity: binary_sensor.ippon_650_status
                        state_not: 'off'
                    card:
                      type: glance
                      columns: 1
                      state_color: true
                      entities:
                        - entity: sensor.ippon_650_status_data
                          name: S

          - type: glance
            columns: 6
            state_color: true
            entities:
              - entity: media_player.home_mini_v
                name: V
              - entity: media_player.home_mini_s
                name: S
              - entity: media_player.home_mini_k
                name: K
              - entity: media_player.home_mini_mb
                name: MB
              - entity: media_player.home_mini_hb
                name: HB
              - entity: media_player.mpd
                name: MPD

      # ##################################
      # Center Block
      # ##################################      
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: picture-entity
                camera_view: live
                aspect_ratio: '16x9'
                entity: camera.door_hb
                show_name: false
                show_state: false
              - type: picture-entity
                camera_view: live
                aspect_ratio: '16x9'
                entity: camera.g3_flex_entrance
                show_name: false
                show_state: false
              - type: picture-entity
                camera_view: live
                aspect_ratio: '16x9'
                entity: camera.g3_flex_hall
                show_name: false
                show_state: false
              - type: picture-entity
                camera_view: live
                aspect_ratio: '16x9'
                entity: camera.g3_flex_dixy
                show_name: false
                show_state: false
              - type: picture-entity
                camera_view: live
                aspect_ratio: '16x9'
                entity: camera.g3_flex_window
                show_name: false
                show_state: false

          - type: glance
            show_name: true
            show_state: false
            state_color: true
            columns: 6
            entities:
              - entity: binary_sensor.esp32_domofon_motion
                name: Out
              - entity: binary_sensor.pinhole_camera_motion
                name: Pinhole
              - entity: binary_sensor.0x158d0001e53cda_motion
                name: MB
              - entity: binary_sensor.motion_s #binary_sensor.0x158d000224f89f_motion
                name: S
              - entity: binary_sensor.motion_v #binary_sensor.0x158d000236bb94_motion
                name: V
              - entity: binary_sensor.motion_hb
                name: HB
              - entity: binary_sensor.0x158d0001d5995e_motion
                name: HB Door
              - entity: binary_sensor.motion_hs #binary_sensor.0x158d0001ae9f61_motion
                name: HS
              - entity: binary_sensor.motion_k
                name: K
              - entity: binary_sensor.0x158d000236bc6d_motion
                name: B
              - entity: binary_sensor.0x158d0001e54280_motion
                name: T
              - entity: binary_sensor.0x158d0001aea602_motion
                name: St

          - type: horizontal-stack
            cards:
              - type: glance
                show_name: true
                show_state: true
                state_color: true
                columns: 3
                entities:
                  - entity: binary_sensor.0x158d00023297e7_moisture
                    name: K
                  - entity: binary_sensor.0x158d0002373a67_moisture
                    name: B
                  - entity: binary_sensor.0x158d00023684c2_moisture
                    name: T
              - type: glance
                show_name: true
                show_state: true
                state_color: true
                entities:
                  - entity: binary_sensor.fridge_hb
                    name:
                  - entity: binary_sensor.0x158d000253722b_contact
                    name: Frdg
                  - entity: sensor.0x158d0002461e5b_temperature
                    name: 
                  - entity: binary_sensor.0x158d000252acba_contact
                    name: Friz
                  - entity: sensor.0x158d000237167c_temperature
                    name: 
                   
                      
          - type: horizontal-stack
            cards:
              - type: glance
                columns: 7
                show_state: true
                state_color: true
                entities:
                  # - entity: binary_sensor.esp32_node_k_magnet
                  #   name: Vent Door
                  #   tap_action:
                  #     action: call-service
                  #     service: switch.toggle
                  #     service_data:
                  #       entity_id: switch.esp32_node_k_airvalve_control
                  - entity: input_boolean.bathroom_occupancy #binary_sensor.someone_showering
                    name: B
                  - entity: binary_sensor.0x158d000232ddd6_contact #binary_sensor.toilet_usage
                    name: T
                  - entity: switch.0x158d0002482619_switch
                    name: BFan B
                    tap_action:
                      action: toggle
                  - entity: switch.esp32_bathroom_node_relay_3
                    name: Fan B
                    tap_action:
                      action: toggle
                  - entity: switch.esp32_bathroom_node_relay_4
                    name: Fan T
                    tap_action:
                      action: toggle
                  - entity: switch.esp32_bathroom_node_relay_2
                    name: W.ON
                    tap_action:
                      action: call-service
                      service: script.water_on
                  - entity: switch.esp32_bathroom_node_relay_1
                    name: W.OFF
                    tap_action:
                      action: call-service
                      service: script.water_off
          - type: glance
            show_state: true
            columns: 6
            state_color: true
            entities:
              - entity: binary_sensor.breather_v
                name: Breather V
                tap_action:
                  action: call-service
                  service: switch.turn_on
                  service_data:
                    entity_id: switch.digma_ir_v_breather_pwr
              - entity: input_number.breather_v_run_time
                name:
              - entity: binary_sensor.breather_s
                name: Breather S
                tap_action:
                  action: call-service
                  service: switch.turn_on
                  service_data:
                    entity_id: switch.digma_ir_s_breather_pwr
              - entity: input_number.breather_s_run_time
                name:
              - entity: binary_sensor.breather_mb
                name: Breather MB
                tap_action:
                  action: call-service
                  service: switch.turn_on
                  service_data:
                    entity_id: switch.digma_ir_mb_breather_pwr
              - entity: input_number.breather_mb_run_time
                name:


          - type: horizontal-stack
            cards:
              - type: glance
                state_color: true
                entities:
                  - entity: fan.humidifier2
                    name: Humi
                    tap_action:
                      action: toggle
                  - entity: sensor.humidifier_mode
                    name: Speed
                    tap_action:
                      action: call-service
                      service: script.cycle_humidifier_mode
                  - entity: sensor.humidifier_water_level
                    name: Water
              - type: glance
                state_color: true
                entities:
                  - entity: fan.purifier2s
                    name: Puri
                    tap_action:
                      action: toggle
                  - entity: sensor.purifier_mode
                    name: Speed
                    tap_action:
                      action: call-service
                      service: script.cycle_purifier_mode
                  - entity: sensor.purifier_pm25
                    name: PM2.5
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: glance
                columns: 7
                state_color: true
                entities:
                  - entity: sensor.0x158d0002464ec0_temperature
                    name: HB
                  - entity: sensor.0x158d0001e586af_temperature
                    name: K
                  - entity: sensor.0x158d000222c746_temperature
                    name: MB
                  - entity: sensor.0x158d0001e6d85a_temperature
                    name: S
                  - entity: sensor.0x158d0001e58714_temperature
                    name: V
                  - entity: sensor.0x158d00020d7c3a_temperature
                    name: B
                  - entity: sensor.0x158d0001e58754_temperature
                    name: T
              - type: glance
                columns: 7
                show_name: false
                show_state: true
                state_color: true
                entities:
                  - entity: sensor.0x158d0002464ec0_humidity
                    name: HB
                  - entity: sensor.0x158d0001e586af_humidity
                    name: K
                  - entity: sensor.0x158d000222c746_humidity
                    name: MB
                  - entity: sensor.0x158d0001e6d85a_humidity
                    name: S
                  - entity: sensor.0x158d0001e58714_humidity
                    name: V
                  - entity: sensor.0x158d00020d7c3a_humidity
                    name: B
                  - entity: sensor.0x158d0001e58754_humidity
                    name: T
          - type: glance
            columns: 7
            state_color: true
            entities:
              - entity: sensor.humidity_average
                name: avg(H)
              - entity: sensor.abs_humidity_h
                name: abs(H)
              - entity: sensor.abs_humidity_b
                name: abs(B)
              - entity: sensor.dewpoint_b
                name: Dew B
              - entity: sensor.dewpoint_t
                name: Dew T
              - entity: sensor.esp32_bathroom_node_cold_pipe
                name: cPipe
              - entity: sensor.mold_t
                name: Mold T
          - type: horizontal-stack
            cards:
              - type: glance
                columns: 5
                entities:
                  - entity: binary_sensor.esp32_hood_k_hood_status
                    name: Stove
                  - entity: sensor.esp32_hood_k_hood_tcouple
                    name: T
                  - entity: binary_sensor.esp32_hood_k_oven_status
                    name: Oven
                  - entity: sensor.esp32_hood_k_oven_tcouple
                    name: T
                  - entity: input_select.oven_target_temperature
                    name: Target
          - type: glance
            columns: 5
            state_color: true
            entities:
              - entity: binary_sensor.0x158d0003fa6cf5_contact
                name: Washer Door
              - entity: input_select.washer_state
                name: State
              - entity: counter.washing_machine_runs
                name: Runs
              - entity: input_number.washer_b_run_time
                name: RunTime
              - entity: script.washing_machine_runs_reset
                name: Runs Reset
                tap_action:
                  action: call-service
                  service: script.washing_machine_runs_reset
          - type: glance
            columns: 6
            state_color: true
            entities:
              - entity: sensor.0x4cf8cdf3c77271d_illuminance
                name: S
              - entity: sensor.0x4cf8cdf3c78d26e_illuminance
                name: MB
              - entity: sensor.0x4cf8cdf3c7754a8_illuminance
                name: K
              - entity: sensor.esp32_node_v_illuminance
                name: V            
              - entity: sensor.esp32_node_k_illuminance
                name: K
              - entity: sensor.esp32_node_mb_illuminance
                name: MB

      # ##################################
      # Right Block
      # ##################################
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: glance
                columns: 7
                state_color: true
                entities:
                  - entity: binary_sensor.doorbell
                    name: Doorbell
                  - entity: binary_sensor.esp32_domofon_incomingcall
                    name: Call
                  - entity: script.domofon_open_door
                    name: Open
                    icon: mdi:lock-open-outline
                    tap_action:
                      action: call-service
                      service: script.domofon_open_door
                  - entity: switch.esp32_domofon_mute #input_boolean.domofon_mute
                    name: Mute
                    tap_action:
                      action: toggle #call-service
                      #service: script.domofon_mute_toggle
                  - entity: switch.esp32_domofon_auto_open_once #binary_sensor.domofon_auto_open_once
                    name: AOpen 1
                    tap_action:
                      action: toggle #call-service
                      #service: script.domofon_auto_open_once_toggle
                  - entity: switch.esp32_domofon_auto_open #binary_sensor.domofon_auto_open
                    name: AOpen
                    tap_action:
                      action: toggle #call-service
                      #service: script.domofon_auto_open_toggle
                  - entity: switch.esp32_domofon_reject #binary_sensor.domofon_ignore
                    name: Reject #Ignore
                    tap_action:
                      action: toggle #call-service
                      #service: script.domofon_ignore_toggle
          # - type: glance
          #   entities:
          #     - entity: switch.circadian_lighting_all
          #       name: All
          #       tap_action:
          #         action: call-service
          #         service: script.circadian_lighting_toggle
          #     - entity: switch.circadian_lighting_k
          #       name: K
          #       tap_action:
          #         action: toggle
          #     - entity: switch.circadian_lighting_s
          #       name: S
          #       tap_action:
          #         action: toggle
          #     - entity: switch.circadian_lighting_v
          #       name: V
          #       tap_action:
          #         action: toggle
          #     - entity: switch.circadian_lighting_mb
          #       name: MB
          #       tap_action:
          #         action: toggle
          - type: entities
            show_name: true
            show_state: true
            state_color: true
            entities:
              - entity: binary_sensor.0x158d0003262acc_contact
                name: 220V State
          - type: glance
            #title: Lights
            show_name: true
            show_state: false
            columns: 6
            state_color: true
            entities:
              - entity: light.led_strip_hb
                name: HB
                tap_action:
                  action: toggle
              - entity: light.led_strip_entrance_hb
                name: W HB
                tap_action:
                  action: toggle
              - entity: switch.0x158d000223921b_channel_1
                name: Entrance
                tap_action:
                  action: toggle
                icon: mdi:ceiling-light
              - entity: switch.0x158d000253f04a_channel_2
                name: Fridge
                icon: mdi:ceiling-light
                tap_action:
                  action: toggle
              
              - entity: light.square_led_v
                name: Main V
                icon: mdi:card
                tap_action:
                  action: toggle
              - entity: light.square_led_v_nightlight
                name: Night V
                icon: mdi:card
                tap_action:
                  action: toggle

              - entity: light.bedside_mb
                name: Lava V
                icon: mdi:lava-lamp
                tap_action:
                  action: toggle
              - entity: light.d1mini_bed_leds_strip_dima
                name: Bed D
                icon: mdi:led-strip-variant
                tap_action:
                  action: toggle
              - entity: light.d1mini_bed_leds_strip_sandra
                name: Bed S
                icon: mdi:led-strip-variant
                tap_action:
                  action: toggle

              
              - entity: light.round_led_mb
                name: Main MB
                icon: mdi:circle
                tap_action:
                  action: toggle
              - entity: light.led_white_mb #light.philips_e27_mb
                name: Table MB
                icon: mdi:lamp
                tap_action:
                  action: toggle
              - entity: light.led_color_mb
                name: Desk MB
                icon: mdi:desk-lamp
                tap_action:
                  action: toggle

              - entity: light.square_led_s
                name: Main S
                tap_action:
                  action: toggle
              - entity: light.d1mini_co2_s_led
                name: Str S
                icon: mdi:alarm-light-outline
                tap_action:
                  action: call-service
                  service: script.strip_s_effects
                double_tap_action:
                  action: toggle
              - entity: light.led_white_s #light.philips_e27_s
                name: Table S
                icon: mdi:lamp
                tap_action:
                  action: toggle
              - entity: light.led_color_v
                name: Desk V
                icon: mdi:desk-lamp
                tap_action:
                  action: toggle

              - entity: light.round_led_hs #switch.0x4cf8cdf3c7a9a48_channel_1
                name: Main HS
                tap_action:
                  action: toggle
              - entity: light.btf_pixel_strip_top #switch.0x00158d0001f5501f_switch #switch.plug_158d0001f5501f
                name: Night HS
                tap_action:
                  action: toggle

              - entity: switch.0x4cf8cdf3c7a9a48_channel_2
                name: Bath
                icon: mdi:spotlight
                tap_action:
                  action: toggle
              - entity: light.mirror_light_b
                name: Mirror
                icon: mdi:mirror
                tap_action:
                  action: toggle
                  
              - entity: switch.0x158d0002a36f7f_channel_1
                name: Main T
                #icon: mdi:spotlight
                tap_action:
                  action: toggle
              - entity: light.esp32_bathroom_node_light
                name: LED T
                #icon: mdi:spotlight
                tap_action:
                  action: toggle

                  
              - entity: light.round_led_k #switch.wall_switch_right_158d0002a36f7f
                name: Main K
                tap_action:
                  #action: toggle
                  action: call-service
                  service: automation.trigger
                  service_data:
                    entity_id: automation.kitchen_main_lamp_on
                double_tap_action:
                  action: call-service
                  service: light.turn_on
                  service_data:
                    entity_id: light.round_led_k
                    brightness_pct: 90
                    kelvin: 5000
              - entity: light.esp32_node_k_light
                name: Night K
                icon: mdi:candle
                tap_action:
                  action: toggle
              - entity: switch.0x158d000366815b_channel_1
                name: L
                tap_action:
                  action: toggle
              - entity: switch.0x158d000366815b_channel_2
                name: R
                tap_action:
                  action: toggle
              - entity: switch.esp32_hood_k_light #switch.esp32_node_k_light
                name: Hood
                tap_action:
                  action: toggle

              - entity: switch.0x158d0002a36433_channel_2
                name: Main St
                tap_action:
                  action: toggle
              - entity: switch.0x158d0002a36433_channel_1
                name: Sec St
                tap_action:
                  action: toggle
          
          - type: glance
            show_state: false
            columns: 8
            state_color: true
            entities:
              - entity: switch.esp32_hood_k_fan #switch.esp32_node_k_fan1
                name: Hood
                icon: mdi:fan
                tap_action:
                  action: toggle
              
              - entity: binary_sensor.washer_b
                name: Washer
              - entity: binary_sensor.kettle_k
                name: Kettle
              - entity: binary_sensor.microwave_k
                name: MW
              - entity: binary_sensor.tv_k
                name: Samsung
                tap_action:
                  action: call-service
                  service: switch.turn_on
                  service_data:
                    entity_id: switch.esp32_node_k_tv_pwr
              - entity: binary_sensor.mi_stick_k
                name: Stick
                tap_action:
                  action: none
              - entity: binary_sensor.tv_v
                name: Sony
                tap_action:
                  action: call-service
                  service: switch.turn_on
                  service_data:
                    entity_id: switch.digma_ir_v_tv_pwr
              - entity: binary_sensor.mi_box_v #device_tracker.mi_box_v
                name: Box
                tap_action:
                  action: none
          - type: glance
            show_name: true
            show_state: false
            state_color: true
            columns: 6
            entities:
              - entity: switch.0x158d000230fc52_switch
                name: Fridge
                icon: mdi:power-socket-au
                tap_action:
                  action: none
              - entity: switch.0x158d00024517fe_switch
                name: Entr
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.0x158d0001f2630e_switch
                name: Wadr L
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.0x158d00023e5812_switch
                name: Wadr R
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.0x158d000322e1d9_switch
                name: Doorcam
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              
              - entity: switch.0x158d000249b26b_switch
                name: Main HS
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.0x158d0002924790_switch
                name: Util HS
                icon: mdi:power-socket
               
              
              - entity: switch.0x158d0002451850_switch #switch.wall_plug_158d0002451850
                name: PC K
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.0x158d0002476ed1_switch
                name: TV K
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.0x158d000249b25b_switch
                name: Oven K
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              # - entity: switch.0x00158d000232481a_switch #switch.plug_158d000232481a
              #   name: Air K
              #   icon: mdi:power-socket
              #   tap_action:
              #     action: toggle

              - entity: switch.0x158d0002467773_switch
                name: PC MB
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.0x158d000205a835_switch
                name: BPlug MB
                icon: mdi:power-socket
                tap_action:
                  action: toggle
                                         
              - entity: switch.0x158d000246776f_switch
                name: Entr V
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.0x158d0002468fbd_switch
                name: Window V
                tap_action:
                  action: toggle
              - entity: switch.0x158d0002395dc9_switch
                name: TV V
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.0x158d000290a093_switch
                name: Sony
                icon: mdi:power-socket
                tap_action:
                  action: toggle
              - entity: switch.0x158d000290a0bc_switch
                name: TV Box V
                icon: mdi:power-socket
                tap_action:
                  action: toggle
               
              - entity: switch.0x158d000239097a_switch
                name: PC S
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.0x158d0002395d58_switch
                name: Window S
                icon: mdi:power-socket-au
                tap_action:
                  action: toggle
              - entity: switch.0x158d00023a657a_switch
                name: Desk K
                icon: mdi:desk-lamp
                tap_action:
                  action: toggle
                  
              - entity: switch.sonoff_pow_r2_1_relay #switch.0x00158d0002c3d86e_switch #switch.plug_158d0002c3d86e
                name: Washer
                tap_action:
                  action: toggle
              - entity: switch.0x158d00028c9875_switch
                name: Kettle
                tap_action:
                  action: toggle
              - entity: switch.0x158d00028a54e4_switch
                name: Microwave
                tap_action:
                  action: toggle
              - entity: switch.sonoff_pow_r2_2_relay
                name: Heater T
                tap_action:
                  action: toggle
          - type: thermostat
            entity: climate.sonoff_pow_r2_2_heater
          - type: glance
            columns: 6
            entities:
              - entity: sensor.sonoff_pow_r2_2_temperature
                name: T
              - entity: sensor.sonoff_pow_r2_2_humidity
                name: H
              - entity: sensor.sonoff_pow_r2_2_pressure
                name: Pr
              - entity: sensor.sonoff_pow_r2_2_voltage
                name: V
              - entity: sensor.sonoff_pow_r2_2_current
                name: A
              - entity: sensor.sonoff_pow_r2_2_power
                name: P
              # - entity: sensor.sonoff_pow_r2_2_energy_daily
              #   name: Daily

          # - type: glance
          #   show_name: true
          #   show_state: false
          #   state_color: true
          #   #columns: 6
          #   entities:
              # - entity: switch.gateway_plug_entrance_hb
              #   name: HBe
              #   tap_action:
              #     action: toggle
              #   icon: mdi:power
              # - entity: switch.gateway_plug_hb
              #   name: HB
              #   tap_action:
              #     action: toggle
              #   icon: mdi:power
              # - entity: switch.gateway_plug_hs
              #   name: HS
              #   tap_action:
              #     action: toggle
              #   icon: mdi:power
              # - entity: switch.gateway_plug_k
              #   name: K
              #   tap_action:
              #     action: toggle
              #   icon: mdi:power
              # - entity: switch.gateway_plug_mb
              #   name: MB
              #   tap_action:
              #     action: toggle
              #   icon: mdi:power
              # - entity: switch.gateway_plug_s
              #   name: S
              #   tap_action:
              #     action: toggle
              #   icon: mdi:power
              # - entity: switch.gateway_plug_v
              #   name: V
              #   tap_action:
              #     action: toggle
              #   icon: mdi:power
              # - entity: light.gateway_light_04cf8c978f0c
              #   name: HBe
              #   tap_action:
              #     action: toggle
              # - entity: light.gateway_light_7811dcb8cb4b
              #   name: HB
              #   tap_action:
              #     action: toggle
              # - entity: light.gateway_light_7c49eb195e21
              #   name: HS
              #   tap_action:
              #     action: toggle
              # - entity: light.gateway_light_04cf8c97808b
              #   name: K
              #   tap_action:
              #     action: toggle
              # - entity: light.gateway_light_7c49ebb1b5e1
              #   name: MB
              #   tap_action:
              #     action: toggle
              # - entity: light.gateway_light_7811dcb8d612
              #   name: S
              #   tap_action:
              #     action: toggle
              # - entity: light.gateway_light_7c49ebb19080
              #   name: V
              #   tap_action:
              #     action: toggle

        #OL - ИБП работает от сети,
        #OB - ИБП работает от батареи,
        #LB - батарея разряжена,
        #RB - необходима замена батареи,
        #CHRG - батарея заряжается,
        #DISCHRG - батарея разряжается,
        #BYPASS - ИБП работает в режиме питания от сети в обход батареи,
        #OVER - ИБП перегружен,
        #TRIM - ИБП отрезает повышенное напряжение сети,
        #BOOST - ИБП усиливает пониженное напряжение сети,


################################################################
# SECURITY PAGE
################################################################
  - title: Security
    icon: mdi:shield
    show_header_toggle: false
    cards:
      - type: vertical-stack
        cards:
          - type: glance
            state_color: true
            entities:
              - entity: input_boolean.security_mode
                name: Security
                tap_action:
                  action: toggle
              - entity: binary_sensor.family_home
                name: Family
              - entity: sensor.people_home
                name: At Home
              - entity: counter.main_door_hb
                name: In\Out
          - type: glance
            state_color: true
            entities:
              - entity: proximity.dima_home
                name: Dima
              - entity: proximity.sandra_home
                name: Sandra
              - entity: proximity.vova_home
                name: Vova

          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - binary_sensor.motion_1h
              - binary_sensor.someone_home_1h
              - type: divider
              - entity: binary_sensor.motion
                secondary_info: last-changed
              - entity: sensor.last_motion
                secondary_info: last-changed
              - type: divider
              - entity: binary_sensor.motion_unifi
                secondary_info: last-changed
              - type: divider
              - entity: binary_sensor.doors
                secondary_info: last-changed
              - entity: sensor.door_last_change
                secondary_info: last-changed
              - type: divider
              - entity: binary_sensor.windows
                secondary_info: last-changed
              - entity: sensor.window_last_change
                secondary_info: last-changed
                
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - entity: binary_sensor.0x158d00024bcf85_gas
                secondary_info: last-changed
              - entity: binary_sensor.0x158d0002c92f31_smoke
                secondary_info: last-changed
      
      - type: vertical-stack
        cards:
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: horizontal-stack
                cards:  
                  - type: glance
                    show_header_toggle: false
                    state_color: true
                    entities:
                      - entity: binary_sensor.top_lock
                        name: Upper Lock
                      - entity: binary_sensor.bottom_lock
                        name: Bottom Lock
                  
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - entity: binary_sensor.0x158d00025371f6_contact
                secondary_info: last-changed
              - entity: binary_sensor.0x158d000200ad58_contact
                secondary_info: last-changed
              - entity: binary_sensor.0x158d00022ccffe_contact
                secondary_info: last-changed
              - entity: binary_sensor.0x158d00025370d1_contact
                secondary_info: last-changed
          
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - entity: binary_sensor.0x158d00027129ae_contact
                secondary_info: last-changed
              - entity: binary_sensor.0x158d0001ef2ffc_contact
                secondary_info: last-changed
              - entity: binary_sensor.0x158d0002a14c5e_contact
                secondary_info: last-changed
              - entity: binary_sensor.0x158d0002529b9c_contact
                secondary_info: last-changed
              - entity: binary_sensor.0x158d00025315e9_contact
                secondary_info: last-changed
              - entity: binary_sensor.0x158d0001e5d6be_contact
                secondary_info: last-changed
              - entity: binary_sensor.0x158d0002531749_contact
                secondary_info: last-changed
      
      - type: entities
        show_header_toggle: false
        state_color: true
        entities:
          - entity: binary_sensor.pinhole_camera_motion
            secondary_info: last-changed
          - entity: binary_sensor.esp32_domofon_motion
            secondary_info: last-changed
          - entity: binary_sensor.digma100_camera_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001e53cda_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000224f89f_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0003140824_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000236bb94_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b43ad4_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001e05856_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b482e9_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001d5995e_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001ae9f61_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b4729d_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b48381_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000236bc6d_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001e54280_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001aea602_motion
            secondary_info: last-changed
          - entity: binary_sensor.motion_g3_flex_entrance
            secondary_info: last-changed
          - entity: binary_sensor.motion_g3_flex_hall
            secondary_info: last-changed
          - entity: binary_sensor.motion_g3_flex_dixy
            secondary_info: last-changed
          - entity: binary_sensor.motion_g3_flex_street
            secondary_info: last-changed
          - entity: binary_sensor.motion_g3_flex_window
            secondary_info: last-changed
          - entity: binary_sensor.motion_g3_flex_yard
            secondary_info: last-changed

################################################################
# DEVICES BY ROOM PAGE
################################################################
  - title: Rooms
    icon: mdi:card-outline
    show_header_toggle: false
    cards:
      - type: entities
        title: Vova's Room
        show_header_toggle: false
        state_color: true
        entities:
          - light.square_led_v
          - light.led_color_v
          - light.bedside_mb          
          #- light.gateway_light_7c49ebb19080
          #- remote.mi_remote
          - type: divider
          - switch.0x158d0002395dc9_switch
          - switch.0x158d000246776f_switch
          - switch.0x158d0002468fbd_switch
          - type: divider
          #- switch.sonoff_1000d03987
          - switch.0x158d000290a093_switch
          - switch.0x158d000290a0bc_switch
          - switch.0x158d00028b4fc3_switch
          - switch.0x158d00035c194f_switch
          - switch.0x158d0003600ea4_switch
          - type: divider
          - switch.sonoff_basic_4_relay #switch.plug_158d00020b4971
          - switch.0x158d00039bd56d_switch          
      - type: entities
        title: Sasha's Room
        show_header_toggle: false
        state_color: true
        entities:
          - light.square_led_s
          - light.led_white_s #light.philips_e27_s
          #- light.gateway_light_7811dcb8d612
          - entity: light.led_color_mb
            name: Desk Color S
          - type: divider
          - fan.humidifier2
          - switch.0x158d00023a657a_switch
          - type: divider
          - switch.0x158d000239097a_switch
          - switch.0x158d0002395d58_switch
          - type: divider
          - switch.0x158d000392623d_switch
          - entity: switch.sonoff_mini_2_relay
            name: Square LED Switch S
            icon: mdi:power-cycle
      - type: entities
        title: Master Bedroom
        show_header_toggle: false
        state_color: true
        entities:
          - light.round_led_mb
          - light.round_led_mb_ambilight
          - light.led_white_mb #light.philips_e27_mb
          #- light.gateway_light_7c49ebb1b5e1
          - type: divider
          - fan.purifier2s
          - type: divider
          - switch.0x158d0002467773_switch
          - switch.0x158d000205a835_switch
          - switch.0x158d000322e30c_switch
          - type: divider
          - switch.sonoff_basic_3_relay

      - type: entities
        title: Hall Big
        show_header_toggle: false
        state_color: true
        entities:
          - switch.0x158d000223921b_channel_1
          - switch.0x158d000253f04a_channel_2
          - light.led_strip_hb
          - light.led_strip_entrance_hb
          #- light.gateway_light_7811dcb8cb4b
          - type: divider
          - switch.0x158d0003539447_switch
          - switch.0x158d000322e1d9_switch
          - switch.0x158d000358c773_switch
          - type: divider
          - switch.0x158d000223921b_channel_2
          - switch.0x158d000253f04a_channel_1
          - type: divider
          - switch.0x158d000230fc52_switch
          - switch.0x158d00024517fe_switch
          - switch.0x158d0001f2630e_switch
          - switch.0x158d00023e5812_switch

      - type: entities
        title: Kitchen
        show_header_toggle: false
        state_color: true
        entities:
          - light.round_led_k
          - light.esp32_node_k_light
          - switch.esp32_hood_k_light
          - switch.0x158d000366815b_channel_1
          - switch.0x158d000366815b_channel_2
          - type: divider
          - switch.esp32_hood_k_fan
          - type: divider
          - switch.0x158d0002451850_switch
          - switch.0x158d0002476ed1_switch
          - switch.0x158d000249b25b_switch
          - switch.0x158d000353a2e3_switch
          - switch.0x158d00028c9875_switch
          - switch.0x158d00028a54e4_switch
          - switch.0x158d00039258de_switch
          
          - type: divider
          - switch.0x158d0001e85086_switch
          - switch.0x158d0002a36f7f_channel_2

      - type: entities
        title: Hall Small
        show_header_toggle: false
        state_color: true
        entities:
          - light.round_led_hs
          - light.btf_pixel_strip_led
          - type: divider
          - light.btf_pixel_strip_top
          - light.btf_pixel_strip_wadrobe
          - light.btf_pixel_strip_bathroom
          - light.btf_pixel_strip_toilet
          - type: divider
          - switch.0x4cf8cdf3c7a9a48_channel_1
          - switch.0x158d000249b26b_switch
          - switch.0x158d0002924790_switch

      - type: entities
        title: Bathroom
        show_header_toggle: false
        state_color: true
        entities:
          - switch.0x4cf8cdf3c7a9a48_channel_2
          - light.mirror_light_b
          - type: divider
          - switch.sonoff_pow_r2_1_relay #switch.0x00158d0002c3d86e_switch #switch.plug_158d0002c3d86e
          - switch.0x158d0002482619_switch
          - switch.esp32_bathroom_node_relay_3
          - type: divider
          - switch.esp32_bathroom_node_relay_2
          - switch.esp32_bathroom_node_relay_1

      - type: entities
        title: Toilet
        show_header_toggle: false
        state_color: true
        entities:
          - switch.0x158d0002a36f7f_channel_1
          - light.esp32_bathroom_node_light
          - type: divider
          - switch.esp32_bathroom_node_relay_4 #switch.0x00158d0001a248e9_switch_l2 #switch.plug_158d0001f54f91

      - type: entities
        title: Storage
        show_header_toggle: false
        state_color: true
        entities:
          - switch.0x158d0002a36433_channel_2
          - switch.0x158d0002a36433_channel_1

################################################################
# SENSORS BY ROOM PAGE
################################################################      
  - title: Sensors
    icon: mdi:album
    cards:
      - type: entities
        title: Hall Big
        show_header_toggle: false
        state_color: true
        entities:
          - binary_sensor.0x158d0001e5d6be_contact
          - binary_sensor.0x158d0002531749_contact
          - binary_sensor.0x158d0001d5995e_motion
          - binary_sensor.0x158d0001e05856_motion
          - binary_sensor.0x158d0002b482e9_motion
          - sensor.0x158d00023d3206_action
          - sensor.0x158d000237167c_temperature
          - sensor.0x158d000237167c_pressure
          - sensor.0x158d000237167c_humidity
          - sensor.0x158d0002461e5b_temperature
          - sensor.0x158d0002461e5b_humidity
          #- binary_sensor.vibration_158d0002b5fbc1
          #- sensor.bed_activity_158d0002b5fbc1
          #- sensor.coordination_158d0002b5fbc1
          #- sensor.tilt_angle_158d0002b5fbc1
          - sun.sun
      - type: entities
        title: Sasha's Room
        show_header_toggle: false
        state_color: true
        entities:
          - binary_sensor.0x158d00025370d1_contact
          - binary_sensor.0x158d00027129ae_contact
          - binary_sensor.0x158d000224f89f_motion
          - binary_sensor.0x158d0003140824_motion
          - sensor.0x158d00019c8afd_action
          - sensor.0x158d0001f3627d_action
          - sensor.0x158d0001e6d85a_temperature
          - sensor.0x158d0001e6d85a_humidity

      - type: entities
        title: Kitchen
        show_header_toggle: false
        state_color: true
        entities:
          - binary_sensor.0x158d00025371f6_contact
          - binary_sensor.0x158d0002b4729d_motion
          - binary_sensor.0x158d0002b48381_motion
          - binary_sensor.0x158d00023297e7_moisture
          - sensor.0x158d0001e586af_temperature
          - sensor.0x158d0001e586af_humidity
          - binary_sensor.0x158d00024bcf85_gas
          - binary_sensor.0x158d0002c92f31_smoke
      - type: entities
        title: Vova's Room
        show_header_toggle: false
        state_color: true
        entities:
          - binary_sensor.0x158d00022ccffe_contact
          - binary_sensor.0x158d0002529b9c_contact
          - binary_sensor.0x158d000236bb94_motion
          - sensor.0x158d00016bdb4a_action
          - sensor.0x158d0001712d55_action
          - sensor.0x158d0001e58714_temperature
          - sensor.0x158d0001e58714_humidity
      - type: entities
        title: Hall Small
        show_header_toggle: false
        state_color: true
        entities:
          - binary_sensor.0x158d0001ae9f61_motion
          - binary_sensor.0x158d0002b43ad4_motion
      - type: entities
        title: Master Bedroom
        show_header_toggle: false
        state_color: true
        entities:
          - binary_sensor.0x158d000200ad58_contact
          - binary_sensor.0x158d00025315e9_contact
          - binary_sensor.0x158d0001e53cda_motion
          - sensor.0x158d00013e6aa5_action
          - sensor.0x158d000222c746_temperature
          - sensor.0x158d000222c746_humidity

      - type: entities
        title: Bathroom
        show_header_toggle: false
        state_color: true
        entities:
          - binary_sensor.0x158d0002a14c5e_contact
          - binary_sensor.0x158d000236bc6d_motion
          - sensor.0x158d0001b94abe_action
          - binary_sensor.0x158d0002373a67_moisture
          - sensor.0x158d00020d7c3a_temperature
          - sensor.0x158d00020d7c3a_humidity
      - type: entities
        title: Toilet
        show_header_toggle: false
        state_color: true
        entities:
          - binary_sensor.0x158d000232ddd6_contact
          - binary_sensor.0x158d0001ef2ffc_contact
          - binary_sensor.0x158d0001e54280_motion
          - sensor.0x158d0001b97111_action
          - binary_sensor.0x158d00023684c2_moisture
          - sensor.0x158d0001e58754_temperature
          - sensor.0x158d0001e58754_humidity
      - type: entities
        title: Storage
        show_header_toggle: false
        state_color: true
        entities:
          - binary_sensor.0x158d0001aea602_motion
          - sensor.0x158d00023d0b86_action
          - sensor.0x158d000233fb72_temperature
          - sensor.0x158d000233fb72_humidity
          - sensor.0x158d000233fb72_pressure

################################################################
# UTILITY COUNTERS PAGE
################################################################
  - title: Utility
    icon: mdi:counter
    cards:
      - type: vertical-stack
        cards:
          - type: glance
            columns: 3
            state_color: true
            entities:
              - entity: sensor.water_raw_single
                name: Total RAW
                icon: mdi:water-pump
              # - entity: sensor.water_postmembrane_single
              #   name: PostM
              #   icon: mdi:filter-menu
              - entity: sensor.water_mineralized_single
                name: M
                icon: mdi:cup-water
              - entity: sensor.water_non_mineralized_single
                name: NM
                icon: mdi:cup-off
                        
          - type: glance
            show_header_toggle: false
            state_color: true
            entities:
              - entity: sensor.esp32_bathroom_node_hot_pipe
                name: Hot Pipe
              - entity: sensor.esp32_bathroom_node_cold_pipe
                name: Cold Pipe
              - entity: sensor.esp32_node_mb_heating_pipe
                name: Heat MB
              - entity: sensor.esp32_node_v_heating_pipe
                name: Heat V
          - type: glance
            show_header_toggle: false
            state_color: true
            entities:
              - entity: sensor.server_daily_cost
                name: Server Daily Cost
              - entity: sensor.server_monthly_cost
                name: Server Monthly Cost
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - sensor.utility_cost
              - type: divider
              - type: divider
              - sensor.water_cost 
              - type: divider
              - type: divider
              - sensor.power_cost
          - type: entities
            state_color: true
            entities:
              - input_number.tariff_energy_day
              - input_number.tariff_energy_night
              - type: divider
              - input_number.tariff_hot_water
              - input_number.tariff_cold_water
          - type: glance
            state_color: true
            show_header_toggle: false
            entities:
              - entity: script.utility_counters_manual_reset
                name: All
              - entity: script.utility_counters_manual_reset_electricity
                name: Electricity
              - entity: script.utility_counters_manual_reset_water
                name: Water
      - type:  vertical-stack
        cards:
          # - type: custom:mini-graph-card
          #   entities:
          #     - sensor.water_hour_single
          #   name: Water usage
          #   group_by: hour
          #   aggregate_func: max
          #   show:
          #     graph: bar
          #   line_color: blue
          #   icon: mdi:water-pump
          #   hours_to_show: 48
          #   points_per_hour: 1
          #   extrema: true
          #   labels: true
          #   line_width: 3
          #   decimals: 2
          #   hour24: true
          - type: 'custom:mini-graph-card'
            color_thresholds:
              - color: '#039BE5'
                value: 0
              - color: '#0da035'
                value: 0.03
              - color: '#e0b400'
                value: 0.09
              - color: '#e45e65'
                value: 0.15
            color_thresholds_transition: hard
            entities:
              - entity: sensor.water_hour_single
                name: Water
              - color: 'rgba(0,0,255,1)'
                entity: binary_sensor.dark_outside
                show_line: false
                y_axis: secondary
            group: false
            group_by: hour
            hour24: true
            hours_to_show: 48
            line_width: 2
            points_per_hour: 4
            show:
              extrema: true
              fill: fade
              icon: true
              labels: false
              name: true
              state: true
              #graph: bar
            state_map:
              - label: Day
                value: 'off'
              - label: Night
                value: 'on'
            style: |
              ha-card {
                border: solid 2px var(--primary-color);
              }
                  
          - type: entities
            title: Water
            show_header_toggle: false
            state_color: true
            entities:
              - sensor.hot_water_month
              - sensor.cold_water_month
              - type: divider
              # - sensor.hot_water_meter
              # - sensor.cold_water_meter
              - type: divider
              - input_number.hot_water_meter
              - input_number.cold_water_meter
              - type: divider
              - input_number.hot_water_meter_last_month
              - input_number.cold_water_meter_last_month
              # - type: divider
              # - entity: binary_sensor.0x158d000232de79_contact
              #   name: Cold water sensor
              # - entity: binary_sensor.0x158d000236fcd5_contact
              #   name: Hot water sensor


      - type: vertical-stack
        cards:
          - type: vertical-stack
            cards:
              # - type: custom:mini-graph-card
              #   icon: mdi:flash
              #   entities:
              #     - sensor.energy_hourly_single
              #     #- sensor.energy_xiaomi_hourly_single
              #   name: Power Consumption
              #   show:
              #     graph: bar
              #   line_color: red
              #   group_by: hour
              #   hours_to_show: 48
              #   points_per_hour: 1
              #   extrema: true
              #   labels: true
              #   line_width: 3
              #   decimals: 2
              #   hour24: true
              - type: 'custom:mini-graph-card'
                color_thresholds:
                  - color: '#100000'
                    value: 0
                  - color: '#400000'
                    value: 50
                  - color: '#800000'
                    value: 500
                  - color: '#bf0000'
                    value: 800
                  - color: '#ff0000'
                    value: 1500
                color_thresholds_transition: hard
                entities:
                  - color: '#005500'
                    entity: sensor.esp8266_pzem_hb_power_kw
                    name: Power
                    show_line: true                
                  # - entity: sensor.energy_hourly_single #sensor.esp8266_pzem_hb_power
                  #   name: Energy
                  #   color: '#FBB124'
                  - color: 'rgba(0,0,255,1)'
                    entity: binary_sensor.dark_outside
                    show_line: false
                    y_axis: secondary

                  # - color: '#cc261c'
                  #   entity: binary_sensor.tariff_t1
                  #   show_line: false
                  #   y_axis: secondary
                  #   name: T1
                  # - color: '#2e934c'
                  #   entity: binary_sensor.tariff_t2
                  #   show_line: false
                  #   y_axis: secondary
                  #   name: T2
                group: false
                group_by: hour
                hour24: true
                hours_to_show: 48
                line_width: 2
                points_per_hour: 4
                show:
                  extrema: true
                  fill: fade
                  icon: true
                  labels: false
                  name: true
                  state: true
                state_map:
                  - label: Day
                    value: 'off'
                  - label: Night
                    value: 'on'
                style: |
                  ha-card {
                    border: solid 2px var(--primary-color);
                  }                  

          - type: entities
            title: Power
            show_header_toggle: false
            state_color: true
            entities:
              - entity: sensor.esp8266_pzem_hb_power_kw
                name: PZEM Power
              - entity: sensor.esp8266_pzem_hb_energy_monthly_day
                name: PZEM Monthly Day
              - entity: sensor.esp8266_pzem_hb_energy_monthly_night
                name: PZEM Monthly Night
              - type: divider
              - entity: sensor.esp8266_pzem_hb_energy_daily
                name: PZEM Daily
              - entity: sensor.energy_daily_count_single
                name: Utility Daily
              - type: divider
              - entity: sensor.esp8266_pzem_hb_energy_monthly
                name: PZEM Monthly
              - entity: sensor.energy_monthly_count_single
                name: Utility Monthly
              - type: divider
              - entity: sensor.esp8266_pzem_hb_energy_monthly_day
                name: PZEM Monthly Day
              - entity: sensor.esp8266_pzem_hb_energy_monthly_night
                name: PZEM Monthly Night
              - entity: sensor.energy_monthly_day
                name: T1/Month
              - entity: sensor.energy_monthly_night
                name: T2/Month
              - type: divider
              # - sensor.power_t1
              # - sensor.power_t2
              - type: divider
              - input_number.power_meter_t1
              - input_number.power_meter_t2
              - type: divider
              - input_number.power_meter_last_month_t1
              - input_number.power_meter_last_month_t2

################################################################
# Rever Osmosis Statistics
################################################################
  - title: Revers Osmosis
    icon: mdi:filter
    cards:
      ##########################################
      # Left column
      ##########################################
      - type: vertical-stack
        cards:
          - type: entities
            #columns: 3
            state_color: true
            title: Usage
            show_header_toggle: false
            entities:
              - input_number.ro_filter1_usage
              - input_number.ro_filter2_usage
              - input_number.ro_filter3_usage
              - input_number.ro_membrane_usage
              - input_number.ro_postfilter_usage
              - input_number.ro_mineralizer_usage
          - type: entities
            #columns: 3
            state_color: true
            title: Wear
            show_header_toggle: false
            entities:
              - sensor.ro_filter1_wearing
              - sensor.ro_filter2_wearing
              - sensor.ro_filter3_wearing
              - sensor.ro_membrane_wearing
              - sensor.ro_postfilter_wearing
              - sensor.ro_mineralizer_wearing
          # - type: entities
          #   #columns: 3
          #   state_color: true
          #   entities:
          #     - sensor.ro_filter1_life_left
          #     - sensor.ro_filter2_life_left
          #     - sensor.ro_filter3_life_left
          #     - sensor.ro_membrane_life_left
          #     - sensor.ro_postfilter_life_left
          #     - sensor.ro_mineralizer_life_left
          - type: glance
            columns: 6
            state_color: true
            title: Reset
            show_header_toggle: false
            entities:
              - entity: script.ro_filter1_replace
                name: F1
              - entity: script.ro_filter2_replace
                name: F2
              - entity: script.ro_filter3_replace
                name: F3
              - entity: script.ro_membrane_replace
                name: M
              - entity: script.ro_postfilter_replace
                name: PostF
              - entity: script.ro_mineralizer_replace
                name: Mnr
              
      - type: vertical-stack
        cards:
          - type: glance
            state_color: true
            title: Raw Water Data
            entities:
              - entity: sensor.mosvodokanal_ph
                name: Ph
              - entity: sensor.mosvodokanal_dh
                name: DH
          - type: glance
            columns: 6
            state_color: true
            title: Total
            show_header_toggle: false
            entities:
              - entity: sensor.water_raw_single
                name: RAW
                icon: mdi:water-pump
              - entity: sensor.water_postmembrane_single
                name: PostM
                icon: mdi:filter-menu
              - entity: sensor.water_mineralized_single
                name: M
                icon: mdi:cup-water
              - entity: sensor.water_non_mineralized_single
                name: NM
                icon: mdi:cup-off
              - entity: sensor.ro_drain
                name: Drain
              - entity: sensor.ro_drain_percentage
                name: Drain %

          # - type: glance
          #   columns: 4
          #   state_color: true
          #   entities:
          #     - entity: binary_sensor.ro_raw_flow_manual
          #       name: Flow RAW
          #       icon: mdi:water-pump
          #     - entity: binary_sensor.ro_postmembrane_flow_manual
          #       name: PostM
          #       icon: mdi:filter-menu
          #     - entity: binary_sensor.ro_mineralized_flow_manual
          #       name: M
          #       icon: mdi:cup-water
          #     - entity: binary_sensor.ro_non_mineralized_flow_manual
          #       name: NM
          #       icon: mdi:cup-off

          - type: glance
            columns: 4
            state_color: true
            entities:
              - entity: sensor.water_raw_daily_single
                name: Today RAW
                icon: mdi:water-pump
              - entity: sensor.water_postmembrane_daily_single
                name: PostM
                icon: mdi:filter-menu
              - entity: sensor.water_mineralized_daily_single
                name: M
                icon: mdi:cup-water
              - entity: sensor.water_non_mineralized_daily_single
                name: NM
                icon: mdi:cup-off
          - type: glance
            columns: 4
            state_color: true
            entities:
              - entity: sensor.water_raw_yesterday
                name: Yesterday RAW
                icon: mdi:water-pump
              - entity: sensor.water_postmembrane_yesterday
                name: PostM
                icon: mdi:filter-menu
              - entity: sensor.water_mineralized_yesterday
                name: M
                icon: mdi:cup-water
              - entity: sensor.water_nonmineralized_yesterday
                name: NM
                icon: mdi:cup-off
          - type: glance
            state_color: true
            entities:
              - entity: script.ro_reset_stats
                name: Reset Statistics
                icon: mdi:lock-reset
              - entity: input_datetime.ro_replace_date
                name: Filters changed at
              - entity: sensor.ro_filters_inuse
                name: InUse
              
      - type: vertical-stack
        cards:
          - type: entities
            #columns: 3
            state_color: true
            show_header_toggle: false
            title: Resource
            entities:
              - input_number.ro_filter1_resource
              - input_number.ro_filter2_resource
              - input_number.ro_filter3_resource
              - input_number.ro_membrane_resource
              - input_number.ro_postfilter_resource
              - input_number.ro_mineralizer_resource
          - type: entities
            state_color: true
            show_header_toggle: false
            title: Pump Control
            entities:
              - entity: switch.0x158d00039258de_switch
                name: Power
              #- binary_sensor.0x00158d000423f316_contact
              - entity: binary_sensor.ro_pump_status
                name: Status
              - entity: sensor.esp01_weight_pad_load
                name: Tank Mass
              - entity: sensor.esp01_weight_pad_load_rate
                name: Rate

          - type: history-graph
            hours_to_show: 6
            entities:
              - entity: sensor.esp01_weight_pad_load
                name: Water Tank Weight


################################################################
# POWER LOADS PAGE
################################################################
  - title: Socket Loads
    icon: mdi:flash
    cards:
      ##########################################
      # Left column
      ##########################################
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: gauge
                name: Current
                entity: sensor.esp8266_pzem_hb_current
                max: 40
                severity:
                  green: 1
                  yellow: 20
                  red: 30
              - type: gauge
                name: Voltage
                entity: sensor.esp8266_pzem_hb_voltage
                min: 200
                max: 240
                severity:
                  green: 215
                  yellow: 120
                  red: 50
          - type: horizontal-stack
            cards:
              - type: gauge
                name: PZEM
                entity: sensor.esp8266_pzem_hb_power
                max: 8800
                severity:
                  green: 100
                  yellow: 5000
                  red: 7000
              - type: gauge
                name: Mercury 200
                entity: sensor.esp32_domofon_power_meter
                max: 8800
                severity:
                  green: 100
                  yellow: 5000
                  red: 7000
          - type: glance
            show_header_toggle: false
            state_color: true
            columns: 4
            entities:
              - entity: sensor.esp8266_pzem_hb_energy_monthly_day
                name: PZEM Day
              - entity: sensor.energy_monthly_day
                name: Day
              - entity: sensor.esp8266_pzem_hb_energy_monthly_night
                name: PZEM Day
              - entity: sensor.energy_monthly_night
                name: Night

          - type: glance
            title: By Room
            show_header_toggle: false
            state_color: true
            entities:
              - entity: sensor.power_consumption_mb
                name: MB
              - entity: sensor.power_consumption_v
                name: V
              - entity: sensor.power_consumption_s
                name: S
              - entity: sensor.power_consumption_hb
                name: HB
              - entity: sensor.power_consumption_hs
                name: HS
              - entity: sensor.power_consumption_k
                name: K
              - entity: sensor.power_consumption_b
                name: B
              - entity: sensor.power_consumption_t
                name: T
              - entity: sensor.power_consumption_st
                name: St

      ##########################################
      # Mid column
      ##########################################
      - type: vertical-stack
        cards:
          - type: entities
            title: Hall Big
            show_header_toggle: false
            state_color: true
            entities:
              - sensor.server_z_hb
              - sensor.plug_fridge_hb
              - sensor.fridge_hb
              - sensor.entrance_hb
              - sensor.wadrobe_l_hb
              - sensor.wadrobe_r_hb
              - sensor.plug_digma_cam_hb
              - sensor.plug_door_cam_hb

          - type: entities
            title: Hall Small
            show_header_toggle: false
            state_color: true
            entities:
              - sensor.main_hs
              - sensor.utility_hs
              - type: divider
              - sensor.washer_b

          - type: entities
            title: Master bedroom
            show_header_toggle: false
            state_color: true
            entities:
              - sensor.pc_mb
              - sensor.bed_plug_mb
              - sensor.wadrobe_mb
      ##########################################
      # Right column
      ##########################################
      - type: vertical-stack
        cards:
          - type: entities
            title: Sasha
            show_header_toggle: false
            state_color: true
            entities:
              - sensor.pc_s
              - sensor.wadrobe_s
              - sensor.wadrobe_top_s
          
          - type: entities
            title: Vova
            show_header_toggle: false
            state_color: true
            entities:
              - sensor.entrance_v
              - sensor.tv_v
              - sensor.wadrobe_v
              
          - type: entities
            title: Kitchen
            show_header_toggle: false
            state_color: true
            entities:
              - sensor.pc_k
              - sensor.tv_k
              - sensor.oven_k
              - sensor.plug_tv_k
              - sensor.plug_top_k
              - sensor.kettle_k
              - sensor.microwave_k
              - sensor.ro_pump_k


################################################################
# DEVICE TRACKERS PAGE
################################################################
  - title: Device trackers
    icon: mdi:map-search #mdi:router-network
    cards:
      - type: entities
        title: Smart Home
        show_header_toggle: false
        state_color: true
        entities:
          - device_tracker.bedside_lamp_mb
          - device_tracker.led_white_s #device_tracker.philips_e27_s
          - device_tracker.led_white_mb #device_tracker.philips_e27_mb
          - device_tracker.led_color_v
          - device_tracker.led_color_mb
          - device_tracker.round_led_k
          - device_tracker.round_led_mb
          - device_tracker.round_led_hs
          - device_tracker.square_led_v
          - device_tracker.square_led_s
          - device_tracker.led_strip_hb
          - device_tracker.led_strip_entrance_hb
          - type: divider
          - device_tracker.gateway3_hb
          # - device_tracker.gateway_plug_entrance_hb
          - device_tracker.gateway3_hs
          - device_tracker.gateway3_k
          # - device_tracker.gateway_v
          - device_tracker.gateway3_s
          # - device_tracker.gateway_mb
          - type: divider
          - device_tracker.gateway_plug_hb
          - device_tracker.gateway_plug_entrance_hb
          - device_tracker.gateway_plug_hs
          - device_tracker.gateway_plug_k
          # - device_tracker.gateway_plug_v_2
          - device_tracker.gateway_plug_s
          # - device_tracker.gateway_plug_mb_2
          #- device_tracker.server_plug_hb
          # - device_tracker.power_strip_wifi
          # - device_tracker.power_strip_s
          # - device_tracker.round_led_s_switch
          - type: divider
          - device_tracker.humidifier_2
          - device_tracker.purifier_2s_mb
          # - type: divider
          # - device_tracker.mi_ir_controller
          
      - type: entities
        title: Phones
        show_header_toggle: false
        state_color: true
        entities:
          - device_tracker.life360_dima_tsymbal
          - device_tracker.iphone_8_dima
          - device_tracker.iphone_8_dtsymbal
          #- device_tracker.iphone8_ping
          - device_tracker.meizu_m2_mini
          - device_tracker.mimax_2
          
          - type: divider
          - device_tracker.life360_sandra_tsymbal
          - device_tracker.iphone_se_sandra_unifi
          - device_tracker.iphone_se_sandra
          #- device_tracker.iphone_7_sasha
          #- device_tracker.iphone7_ping
          - device_tracker.iphone_6
          
          - type: divider
          - device_tracker.life360_vova_tsymbal
          #- device_tracker.mimax2_ping
          
          - type: divider
          - device_tracker.iphone_5s
          
          - type: divider
          - device_tracker.ipad_sasha
          - device_tracker.ipad_dima

      - type: entities
        title: PCs
        show_header_toggle: false
        state_color: true
        entities:
          - device_tracker.x10srl_ipmi
          - device_tracker.main_server
          - device_tracker.i5_mod
          - device_tracker.dell_m6800_wifi
          #- device_tracker.dell_m6800_lan
          #- device_tracker.r418_wifi
          - device_tracker.lenovo_u430p_wifi
          - device_tracker.brix_3455_lan
          #- device_tracker.brix_3455_wifi
          - device_tracker.rpi_lan
          - device_tracker.j3455_lan
          #- device_tracker.a722_board
      
      - type: entities
        title: Network
        show_header_toggle: false
        state_color: true
        entities:
          #- device_tracker.main_gate
          #- device_tracker.cloud_key
          - device_tracker.main_switch_16_150w
          - device_tracker.switch_8_60_k
          - device_tracker.switch_8_60_s
          - device_tracker.switch_8_60_mb
          - device_tracker.ap_pro_hb
          - device_tracker.ap_pro_hs
          - device_tracker.ap_pro_s
          - device_tracker.ap_v
          - device_tracker.ap_mb
          - device_tracker.ap_nanohd_hb
      
      - type: entities
        title: Others
        show_header_toggle: false
        state_color: true
        entities:
          - device_tracker.d_link_dns_320l
          - device_tracker.mi_box_v
          - device_tracker.mi_stick_k
          - device_tracker.checkmachine
          - device_tracker.hp_178nw
          - device_tracker.security_system
          
      - type: entities
        title: Cameras
        show_header_toggle: false
        state_color: true
        entities:
          - device_tracker.g3_flex_dixy
          - device_tracker.g3_flex_window
          - device_tracker.g3_flex_hall
          - device_tracker.g3_flex_entrance
          - device_tracker.g3_flex_street
          - type: divider
          #- device_tracker.roundcam
          #- device_tracker.square_cam_hs
          - device_tracker.360_camera_hb
          - device_tracker.digma_division_100
          - device_tracker.door_cam_hb
      
      - type: entities
        title: Home Mini
        show_header_toggle: false
        state_color: true
        entities:
          - device_tracker.home_mini_k
          - device_tracker.home_mini_v
          - device_tracker.home_mini_s
          - device_tracker.home_mini_mb
          - device_tracker.home_mini_hb
      
#      - type: entities
#        title: Boards
#        show_header_toggle: false
#        state_color: true
#        entities:
#          - device_tracker.rpi_cam_wifi
#          - device_tracker.rpi_zero
#          - device_tracker.pi_zero2_mb
#          - device_tracker.pi_zero2_mqtt
#          - device_tracker.pi_zero2_test2
          
      # - type: entities
      #   title: ESPs
      #   show_header_toggle: false
      #   state_color: true
      #   entities:
      #     #- device_tracker.esp01_hdd
      #     - device_tracker.esp32_domofon
      #     - device_tracker.esp32_node_k_main
      #     - device_tracker.esp32_water_filter
          
      #     - device_tracker.sonoff_mini
      #     - device_tracker.sonoff_4ch

      # - type: entities
      #   title: CO2 sensors
      #   show_header_toggle: false
      #   state_color: true
      #   entities:
      #     - device_tracker.d1_mini_co2_mb
      #     - device_tracker.d1_mini_co2_v
      #     - device_tracker.d1_mini_co2_s

################################################################
# Cameras PAGE
################################################################
  - title: Cameras
    icon: mdi:cctv
    cards:
      - type: picture-entity
        camera_view: live
        aspect_ratio: '16x9'
        entity: camera.door_hb
        show_name: false
        show_state: false
      - type: picture-entity
        camera_view: live
        aspect_ratio: '16x9'
        entity: camera.digma100
        show_name: false
        show_state: false
      - type: picture-entity
        camera_view: live
        aspect_ratio: '16x9'
        entity: camera.g3_flex_entrance
        show_name: false
        show_state: false
      - type: picture-entity
        camera_view: live
        aspect_ratio: '16x9'
        entity: camera.g3_flex_hall
        show_name: false
        show_state: false
      - type: picture-entity
        camera_view: live
        aspect_ratio: '16x9'
        entity: camera.g3_flex_dixy
        show_name: false
        show_state: false
      - type: picture-entity
        camera_view: live
        aspect_ratio: '16x9'
        entity: camera.g3_flex_street
        show_name: false
        show_state: false
      - type: picture-entity
        camera_view: live
        aspect_ratio: '16x9'
        entity: camera.g3_flex_window
        show_name: false
        show_state: false
      - type: picture-entity
        camera_view: live
        aspect_ratio: '16x9'
        entity: camera.g3_flex_yard
        show_name: false
        show_state: false
      # - type: 'custom:webrtc-camera'
      #   url: !secret protect_g3_entrance
      # - type: 'custom:webrtc-camera'
      #   url: !secret protect_g3_hall
      # - type: 'custom:webrtc-camera'
      #   url: !secret protect_g3_dixy
      # - type: 'custom:webrtc-camera'
      #   url: !secret protect_g3_street
      # - type: 'custom:webrtc-camera'
      #   url: !secret protect_g3_window
      # - type: 'custom:webrtc-camera'
      #   url: !secret protect_g3_yard

################################################################
# CLIMATE PAGE
################################################################
  - title: Climate
    icon: mdi:weather-sunset
#    panel: true
    cards:
      - type: vertical-stack
        cards:
          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - entity: fan.humidifier2
              - type: divider
              - entity: sensor.humidifier_led
                name: LED
              - entity: sensor.humidifier_mode
                name: Mode
              - entity: sensor.humidifier_fan_speed
                name: Fan speed
               
              - entity: sensor.humidifier_water_level
                name: Water level
 
          - type: horizontal-stack
            cards:
              - type: entity-button
                name: mode
                icon: mdi:fan
                entity: fan.humidifier2
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.cycle_humidifier_mode
 
              - type: entity-button
                name: LED
                icon: mdi:lightbulb
                entity: fan.humidifier2
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.cycle_humidifier_led
 
              - type: entity-button
                name: Buzzer
                icon: mdi:music-note
                entity: fan.humidifier2
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.set_humidifier_buzzer
 
              - type: entity-button
                name: DRY MODE
                icon: mdi:cup-water
                entity: fan.humidifier2
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.set_humidifier_dry_mode

          - type: entities
            show_header_toggle: false
            state_color: true
            entities:
              - entity: fan.purifier2s
              - type: divider
              - entity: sensor.purifier_pm25
                name: PM2.5
                icon: mdi:meteor
              - entity: sensor.purifier_mode
                name: Mode
              - entity: sensor.purifier_fan_speed
                name: Fan speed
              - entity: sensor.purifier_filter_left
                name: Filter left

          - type: horizontal-stack
            state_color: true
            cards:
              - type: entity-button
                name: mode
                icon: mdi:fan
                entity: fan.purifier2s
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.cycle_purifier_mode
              - type: entity-button
                name: mode
                icon: mdi:fan
                entity: fan.purifier2s
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.cycle_purifier_mode
              - type: entity-button
                name: mode
                icon: mdi:fan
                entity: fan.purifier2s
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.cycle_purifier_mode
              - type: entity-button
                name: mode
                icon: mdi:fan
                entity: fan.purifier2s
                hold_action: none
                tap_action:
                  action: call-service
                  service: script.cycle_purifier_mode
 
      - type: vertical-stack
        cards:
          - type: glance
            state_color: true
            columns: 4
            entities:
              - sensor.z19_co2_v
              - sensor.z19_co2_s
              - sensor.z19_co2_mb
              - sensor.z19_co2_k
          - type: glance
            state_color: true
            columns: 8
            entities:
              - entity: binary_sensor.breather_v
                name: V
              - entity: binary_sensor.0x158d00022ccffe_contact
                name: Window
              - entity: switch.0x158d000344998e_switch
                name: Plug
              - entity: switch.digma_ir_v_breather_pwr
                name: PWR
                tap_action:
                  action: toggle
              - entity: switch.digma_ir_v_breather_down
                name: Down
                tap_action:
                  action: toggle
              - entity: switch.digma_ir_v_breather_up
                name: Up
                tap_action:
                  action: toggle
              - entity: automation.vova_breazer_on
                name: aON
                tap_action:
                  action: toggle
              - entity: automation.vova_breazer_off
                name: aOFF
                tap_action:
                  action: toggle
                  
              - entity: binary_sensor.breather_s
                name: S
              - entity: binary_sensor.0x158d00025370d1_contact
                name: Window
              - entity: switch.0x158d00036148b9_switch
                name: Plug
              - entity: switch.digma_ir_s_breather_pwr
                name: PWR
                tap_action:
                  action: toggle
              - entity: switch.digma_ir_s_breather_down
                name: Down
                tap_action:
                  action: toggle
              - entity: switch.digma_ir_s_breather_up
                name: Up
                tap_action:
                  action: toggle
              - entity: automation.sasha_breazer_on
                name: aON
                tap_action:
                  action: toggle
              - entity: automation.sasha_breazer_off
                name: aOFF
                tap_action:
                  action: toggle
                  
              - entity: binary_sensor.breather_mb
                name: MB
              - entity: binary_sensor.0x158d000200ad58_contact
                name: Window
              - entity: switch.0x158d000345119e_switch
                name: Plug
              - entity: switch.digma_ir_mb_breather_pwr
                name: PWR
                tap_action:
                  action: toggle
              - entity: switch.digma_ir_mb_breather_down
                name: Down
                tap_action:
                  action: toggle
              - entity: switch.digma_ir_mb_breather_up
                name: Up
                tap_action:
                  action: toggle
              - entity: automation.master_bedroom_breazer_on
                name: aON
                tap_action:
                  action: toggle
              - entity: automation.master_bedroom_breazer_off
                name: aOFF
                tap_action:
                  action: toggle

      - type: vertical-stack
        cards:
          - type: history-graph
            hours_to_show: 48
            #title: 'CO2 V'
            entities:
              - sensor.z19_co2_v
          - type: history-graph
            hours_to_show: 48
            #title: 'CO2 S'
            entities:
              - sensor.z19_co2_s
          - type: history-graph
            hours_to_show: 48
            #title: 'CO2 MB'
            entities:
              - sensor.z19_co2_mb
          - type: history-graph
            hours_to_show: 48
            #title: 'CO2 K'
            entities:
              - sensor.z19_co2_k

          
################################################################
# SYSTEM MONITORING PAGE
################################################################
  - title: System Details
    icon: mdi:cog-outline
    cards:
      - type: vertical-stack
        cards:
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: entities
                state_color: true
                entities:
                  - entity: input_number.outside_light_level
                  - entity: binary_sensor.light_outside_mi
                  - entity: binary_sensor.dark_outside_mi
              - type: glance
                entities:
                  - entity: sensor.0x4cf8cdf3c77271d_illuminance
                  - entity: sensor.0x4cf8cdf3c78d26e_illuminance
                  - entity: sensor.0x4cf8cdf3c7754a8_illuminance
          - type: entities
            state_color: true
            entities:
              - entity: input_number.battery_low_level
              - entity: script.battery_level_check
                name: Check now
          - type: vertical-stack
            cards:
              - type: entities
                entities:
                  - input_select.main_audio_out
                  - input_number.main_volume
                  - script.tts_test
                  - input_boolean.silent_mode
          - type: glance
            columns: 8
            state_color: true
            entities:
              - entity: switch.shp2_socket_1_relay
                name: MQTT
                tap_action: none
              - entity: sensor.shp2_socket_1_w
                name: 

              - entity: switch.shp6_socket_2_relay
                name: NAS
                tap_action: none
              - entity: sensor.shp6_socket_2_w
                name: 

              - entity: switch.shp2_socket_2_relay
                name: j3455
                tap_action: none
              - entity: sensor.shp2_socket_2_w
                name: 
                
                
              - entity: switch.shp6_socket_1_relay
                name: RPIz
                tap_action: none
              - entity: sensor.shp6_socket_1_w
                name: 
          - type: glance
            columns: 5
            state_color: true
            entities:
              - entity: switch.0x158d0003535ee5_switch
                name: PCv
                tap_action: none
              - entity: sensor.2620_s
              - entity: binary_sensor.monitor_brix_v
                name: Dell LCD
              - entity: switch.0x158d00035c194f_switch
                name: i5
                tap_action: none
              - entity: sensor.i5_mb
                name: i5 P
          - type: glance
            columns: 4
            state_color: true
            entities:
              - entity: switch.vovapc
                name: PCv
                hold_action: none
                tap_action:
                  action: toggle
              - entity: switch.sashapc
                name: PCs
                hold_action: none
                tap_action:
                  action: toggle
              # - entity: switch.r418
              #   name: R418
              #   hold_action: none
              #   tap_action:
              #     action: toggle
              - entity: switch.u430p
                name: U430P
                hold_action: none
                tap_action:
                  action: toggle
              - entity: switch.brix3160_lan
                name: BRIX 3160
                hold_action: none
                tap_action:
                  action: toggle
          - type: entities
            state_color: true
            entities:
              - sensor.db_size
              - sensor.db_size_change_1h
              - sensor.influxdb_total_size #sensor.influxdb_size
              - sensor.influxdb_size_change_1h
              - type: call-service
                icon: mdi:database-minus
                name: Purge 0
                action_name: Purge
                service: recorder.purge
                service_data:
                  keep_days: 0
                  repack: true
              - type: call-service
                icon: mdi:database-minus
                name: Purge 1
                action_name: Purge
                service: recorder.purge
                service_data:
                  keep_days: 1
                  repack: true
              - type: call-service
                icon: mdi:database-minus
                name: Purge 2
                action_name: Purge
                service: recorder.purge
                service_data:
                  keep_days: 2
                  repack: true
          
          
          # - type: glance
          #   state_color: true
          #   entities:
          #     - entity: switch.esp01_hdd_box_power
          #       name: USB HDD
          #       tap_action:
          #         action: toggle
          #     - entity: binary_sensor.esp01_hdd_box_powerstatus
          #       name: Status
          #       tap_action:
          #         action: call-service
          #         service: switch.toggle
          #         service_data:
          #           entity_id: switch.esp01_hdd_box_power
          #     - entity: binary_sensor.esp01_hdd_box_status
          #       name: Connection
          - type: custom:auto-entities
            show_empty: false
            card:
              type: entities
              show_header_toggle: false
              state_color: true
            filter:
              include:
                - domain: timer
              exclude:
                - state: 'idle'

      # Mid column
      #############
      - type: vertical-stack
        cards:
          # - type: history-graph
          #   entities:
          #     - entity: remote.0x588e81fffedcb38d_pair
          #       name: HB
          #     - entity: remote.0x842e14fffe1508a6_pair
          #       name: HS
          #     - entity: remote.0x588e81fffedd3c41_pair
          #       name: S
          #     - entity: remote.0x588e81fffe72678e_pair
          #       name: K
          # - type: glance
          #   columns: 8
          #   entities:
          #     - entity: sensor.gw3_hb_radio_channel
          #       name: HB
          #     - entity: sensor.gw3_hb_radio_tx_power
          #       name: 
          #     - entity: sensor.gw3_hs_radio_channel
          #       name: HS
          #     - entity: sensor.gw3_hs_radio_tx_power
          #       name: 
          #     - entity: sensor.gw3_s_radio_channel
          #       name: S
          #     - entity: sensor.gw3_s_radio_tx_power
          #       name: 
          #     - entity: sensor.gw3_k_radio_channel
          #       name: K
          #     - entity: sensor.gw3_k_radio_tx_power
          #       name: 
          - type: glance
            columns: 3
            entities:
              - entity: binary_sensor.google_dns
                name: G DNS
                icon: mdi:dns
              - entity: binary_sensor.telegram_api
                name: TG
              #- entity: binary_sensor.mqtt_state
              #  name: MQTT
              - entity: binary_sensor.j3455_state
                name: j3455
              #- entity: binary_sensor.rpi_state
              #  name: RPI
              #- entity: binary_sensor.nuc_state
              #  name: NUC
          - type: glance
            state_color: true
            entities:
              - sensor.git_stars
              - entity: sensor.config_line_count_ratio
                name: Config Ratio
              - entity: sensor.config_line_count
                name: Total Lines
              - entity: sensor.config_line_count_code
                name: Code Lines
          - type: glance
            show_header_toggle: false
            columns: 8
            state_color: true
            entities:
              - entity: sensor.total_entities
                name: Total
              - entity: sensor.tracker_count
                icon: mdi:cellphone-link
                name: Trackers
                tap_action:
                  action: call-service
                  service: script.update_sensors_stats
              - entity: sensor.lights_count
                name: Lights
                tap_action:
                  action: call-service
                  service: script.update_sensors_stats
              - entity: sensor.sensor_count
                name: Sensors
                tap_action:
                  action: call-service
                  service: script.update_sensors_stats
              - entity: sensor.binary_sensor_count
                name: B-Sensors
                tap_action:
                  action: call-service
                  service: script.update_sensors_stats
              - entity: sensor.switch_count
                name: Switches
              - entity: sensor.automation_count
                name: Auto
                tap_action:
                  action: call-service
                  service: script.update_sensors_stats
              - entity: sensor.script_count
                name: Scripts
                tap_action:
                  action: call-service
                  service: script.update_sensors_stats
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: glance
                columns: 4
                state_color: true
                entities:
                  - entity: sensor.start_time
                    name: HA Init
                  - entity: sensor.mqtt_broker_uptime_text
                    name: MQTT Up
                  #- entity: sensor.zigbee2mqtt_uptime_text
                  #  name: Bridge Up
                  - entity: sensor.ha_uptime_text
                    name: HA Up
                  - entity: sensor.host_uptime_text
                    name: Host Up
              - type: glance
                columns: 6
                state_color: true
                entities:
                  - entity: sensor.ha_supervisor_current_version
                    name: Super
                    tap_action:
                      action: call-service
                      service: script.ha_released_update
                  - entity: sensor.ha_supervisor_latest_version
                    name: Latest
                    tap_action:
                      action: call-service
                      service: script.ha_released_update
                  - entity: sensor.ha_supervisor_latest_beta
                    name: Beta
                    tap_action:
                      action: call-service
                      service: script.ha_released_update
                  - entity: sensor.ha_installed_version
                    name: HA
                    tap_action:
                      action: call-service
                      service: script.ha_released_update
                  - entity: sensor.ha_latest_version
                    name: Latest
                    tap_action:
                      action: call-service
                      service: script.ha_released_update
                  - entity: sensor.ha_latest_beta
                    name: Beta
                    tap_action:
                      action: call-service
                      service: script.ha_released_update
              - type: history-graph
                hours_to_show: 24
                #refresh_interval: 0
                entities:
                  - entity: sensor.date
                  - entity: sensor.ha_installed_version
                    name: HA
                  - entity: sensor.ha_supervisor_current_version
                    name: Super
              - type: glance
                state_color: true
                columns: 7
                entities:
                  - entity: counter.badlogin_counter
                    name: Bad Logins
                  - entity: counter.restart_counter
                    name: Restarts
                    hold_action:
                      action: call-service
                      service: script.error_reset
                  - entity: counter.error_counter
                    name: Errors
                  - entity: sensor.error_counter_hourly
                    name: perH
                  - entity: counter.warning_counter
                    name: Warnings
                    hold_action:
                      action: call-service
                      service: script.warning_reset
                  - entity: sensor.warning_counter_hourly
                    name: perH
                  - entity: counter.automation_error_counter
                    name: A Errors
                    hold_action:
                      action: call-service
                      service: script.error_reset
                    
              - type: glance
                show_header_toggle: false
                state_color: true
                entities:
                  - entity: sensor.gdrive_backup_state
                    icon: mdi:google-drive
                    name: G-BU Status
                  - entity: binary_sensor.snapshots_stale
                    name: G-BU Stale
                  - entity: sensor.gdrive_last_backup
                    icon: mdi:clock-digital
                    name: G-BU Last
          - type: horizontal-stack
            cards:
              - type: glance
                state_color: true
                entities:
                  - entity: binary_sensor.j3455
                    name: j3455
                  - entity: binary_sensor.j3455_state
                    name: HA
                    icon: mdi:home-assistant
                  - entity: binary_sensor.j3455_automation
                    name: Auto
                    
                  - entity: binary_sensor.j3455_lead
                    name: Lead
                    
                  
              # - type: glance
              #   state_color: true
              #   entities:
              #     - entity: binary_sensor.rpi
              #       name: RPI
              #     - entity: binary_sensor.rpi_state
              #       name: HA
              #       icon: mdi:home-assistant
              #     - entity: binary_sensor.rpi_automation
              #       name: Auto
                    
              #     - entity: binary_sensor.rpi_lead
              #       name: Lead
              

      # ############  
      # Right column
      ##############
      - type: vertical-stack
        cards:
            # ######################################
            # Load bars for 12 threads CPU (e2620 v3)
            # ######################################
          # - type: custom:bar-card
          #   title_position: top
          #   columns: 3
          #   height: 20px
          #   min: 0
          #   max: 24.4
          #   target: 19
          #   severity:
          #     - value: 3
          #       color: '#40bf40'
          #     - value: 6
          #       color: '#bf9540'
          #     - value: 9
          #       color: '#bf4040'
          #     - value: 12 
          #       color: '#ff0000'
          #   padding: 2px
          #   direction: right
          #   entities:
          #     - sensor.load_1m
          #     - sensor.load_5m
          #     - sensor.load_15m
          - type: custom:bar-card
            columns: 3
            height: 30px
            min: 0
            max: 14
            target: 10
            positions:
              icon: 'off'
              indicator: inside
              name: inside
            severity:
              - color: '#40bf40'
                from: 0
                to: 4
              - color: '#bf9540'
                from: 4
                to: 8
              - color: '#bf4040'
                from: 8 
                to: 12
              - color: '#ff0000'
                from: 12
                to: 20
            padding: 2px
            direction: right
            entities:
              - sensor.load_1m
              - sensor.load_5m
              - sensor.load_15m
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: custom:bar-card
                columns: 3
                height: 30px
                min: 20
                max: 100
                positions:
                  icon: 'off'
                  indicator: inside
                  name: inside
                severity:
                  - color: '#40bf40'
                    from: 0
                    to: 45
                  - color: '#bf9540'
                    from: 45
                    to: 55
                  - color: '#bf4040'
                    from: 55 
                    to: 65
                  - color: '#ff0000'
                    from: 65
                    to: 100
                padding: 2px
                direction: right
                entities:
                  - sensor.ipmi_cpu_temp
                  - sensor.ipmi_pch_temp
                  - sensor.ipmi_system_temp

              - type: glance
                #title: Ubuntu Status
                columns: 5
                state_color: true
                entities:
                  - entity: sensor.ssd_usage
                    icon: mdi:chip
                    name: "/"
                  - entity: sensor.nvme2_usage
                    icon: mdi:chip
                    name: DB
                  - entity: sensor.media_usage
                    icon: mdi:harddisk
                    name: M
                  - entity: sensor.back_2tb_usage
                    icon: mdi:harddisk
                    name: Back_2Tb
                  - entity: sensor.320l_usage
                    name: 320l

          #- type: custom:vertical-stack-in-card
          - type: vertical-stack
            cards:      
              - type: conditional
                state_color: true
                conditions:
                  - entity: binary_sensor.ippon_1200_status
                    state_not: 'off'
                card:
                  type: glance
                  columns: 3
                  state_color: true
                  entities:
                    - entity: sensor.ippon_1200_status_data
                      name: HB
                    - entity: sensor.ippon_1200_load
                      name: Load
                    # - entity: sensor.ippon_1200_battery_runtime
                    #   name: Runtime
                    - entity: sensor.ippon_1200_battery_charge
                      name: Charge
                    #- entity: sensor.ippon_1200_battery_voltage
                    #  name: Voltage
                    # - entity: sensor.ippon_1200_input_voltage
                    #   name: Input
                    # - entity: sensor.ippon_1200_output_voltage
                    #   name: Output
              - type: conditional
                state_color: true
                conditions:
                  - entity: binary_sensor.ippon_1050_status
                    state_not: 'off'
                card:
                  type: glance
                  columns: 5
                  state_color: true
                  entities:
                    - entity: sensor.ippon_1050_status_data
                      name: MB
                    - entity: sensor.ippon_1050_load
                      name: Load
                    # - entity: sensor.ippon_1050_battery_runtime
                    #   name: Runtime
                    - entity: sensor.ippon_1050_battery_charge
                      name: Charge
                    #- entity: sensor.ippon_1050_battery_voltage
                    #  name: Voltage
                    - entity: sensor.ippon_1050_input_voltage
                      name: Input
                    - entity: sensor.ippon_1050_output_voltage
                      name: Output
              - type: conditional
                state_color: true
                conditions:
                  - entity: binary_sensor.cyber650_k_status
                    state_not: 'off'
                card:
                  type: glance
                  columns: 5
                  state_color: true
                  entities:
                    - entity: sensor.cyber650_k_status_data
                      name: K
                    - entity: sensor.cyber650_k_load
                      name: Load
                    # - entity: sensor.cyber650_k_battery_runtime
                    #   name: Runtime
                    - entity: sensor.cyber650_k_battery_charge
                      name: Charge
                    #- entity: sensor.cyber650_k_battery_voltage
                    #  name: Voltage
                    - entity: sensor.cyber650_k_input_voltage
                      name: Input
                    - entity: sensor.cyber650_k_output_voltage
                      name: Output
              - type: conditional
                state_color: true
                conditions:
                  - entity: binary_sensor.ippon_650_status
                    state_not: 'off'
                card:
                  type: glance
                  columns: 5
                  state_color: true
                  entities:
                    - entity: sensor.ippon_650_status_data
                      name: S
                    - entity: sensor.ippon_650_load
                      name: Load
                    # - entity: sensor.ippon_650_battery_runtime
                    #   name: Runtime
                    - entity: sensor.ippon_650_battery_charge
                      name: Charge
                    #- entity: sensor.cyber650_k_battery_voltage
                    #  name: Voltage
                    - entity: sensor.ippon_650_input_voltage
                      name: Input
                    - entity: sensor.ippon_650_output_voltage
                      name: Output

          - type: glance
            columns: 7
            state_color: true
            entities:
              - entity: switch.blackhole_turtle_mode
                name: Turtle
                icon: mdi:turtle
                tap_action:
                  action: toggle
              - entity: sensor.blackhole_status
                name: Status
              - entity: sensor.blackhole_down_speed
                name: DL
              - entity: sensor.blackhole_up_speed
                name: UL
              - entity: sensor.blackhole_total_torrents
                name: Total
              - entity: sensor.blackhole_active_torrents
                name: Active
              - entity: sensor.blackhole_completed_torrents
                name: Completed
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: horizontal-stack
                cards:
                  - type: glance
                    show_state: false 
                    show_name: false
                    entities:
                      - entity: script.speedtest_manual
                        name: Test
                        icon: mdi:recycle
                        tap_action:
                          action: call-service
                          service: script.speedtest_manual
                  - type: 'custom:mini-graph-card'
                    entities:
                      - entity: sensor.speedtest_download
                        name: Download
                        show_state: true
                      - entity: sensor.speedtest_upload
                        name: Upload
                        show_state: true
                    font_size: 70
                    hour24: true
                    hours_to_show: 24
                    name: Speedtest
                    points_per_hour: 1
                    unit: Mbit/s                          
                  # - type: gauge
                  #   name: Ping
                  #   entity: sensor.speedtest_ping
                  #   max: 30
                  #   severity:
                  #     green: 10
                  #     yellow: 15
                  #     red: 20

                  # - type: gauge
                  #   name: DL
                  #   entity: sensor.speedtest_download
                  #   max: 500
                  #   severity:
                  #     green: 400
                  #     yellow: 250
                  #     red: 50
                  # - type: gauge
                  #   name: UL
                  #   entity: sensor.speedtest_upload
                  #   max: 500
                  #   severity:
                  #     green: 400
                  #     yellow: 250
                  #     red: 50
              # - type: glance
              #   #title: Unifi Status
              #   columns: 7
              #   state_color: true
              #   entities:
              #     - entity: sensor.usg_alerts
              #       name: Alert
              #       #icon: mdi:memory
              #     - entity: sensor.usg_lan
              #       name: LAN
              #     - entity: sensor.usg_wan
              #       name: WAN
              #     - entity: sensor.usg_wlan
              #       name: WLAN
              #     - entity: sensor.usg_www
              #       name: WWW
              #     - entity: group.unifi_devices
              #       name: Devices
              #     - entity: sensor.usg_vpn
              #       name: VPN
################################################################
# System Health
################################################################
  - title: System Health
    icon: mdi:heart-pulse
    cards:
      - type: vertical-stack
        cards:
          - type: custom:bar-card
            columns: 3
            height: 30px
            min: 0
            max: 14
            target: 10
            positions:
              icon: 'off'
              indicator: inside
              name: inside
            severity:
              - color: '#40bf40'
                from: 0
                to: 4
              - color: '#bf9540'
                from: 4
                to: 8
              - color: '#bf4040'
                from: 8 
                to: 12
              - color: '#ff0000'
                from: 12
                to: 20
            padding: 2px
            direction: right
            entities:
              - sensor.load_1m
              - sensor.load_5m
              - sensor.load_15m
          
          - type: vertical-stack
            cards:
              - type: custom:bar-card
                columns: 3
                height: 30px
                min: 20
                max: 100
                positions:
                  icon: 'off'
                  indicator: inside
                  name: inside
                severity:
                  - color: '#40bf40'
                    from: 0
                    to: 45
                  - color: '#bf9540'
                    from: 45
                    to: 55
                  - color: '#bf4040'
                    from: 55 
                    to: 65
                  - color: '#ff0000'
                    from: 65
                    to: 100
                padding: 2px
                direction: right
                entities:
                  - entity: sensor.ipmi_cpu_temp
                    name: CPU
                  - entity: sensor.ipmi_pch_temp
                    name: PCH
                  - entity: sensor.ipmi_system_temp
                    name: System
              - type: custom:bar-card
                columns: 4
                height: 30px
                min: 20
                max: 100
                positions:
                  icon: 'off'
                  indicator: inside
                  name: inside
                severity:
                  - color: '#40bf40'
                    from: 0
                    to: 45
                  - color: '#bf9540'
                    from: 45
                    to: 55
                  - color: '#bf4040'
                    from: 55 
                    to: 65
                  - color: '#ff0000'
                    from: 65
                    to: 100
                padding: 2px
                direction: right
                entities:
                  - entity: sensor.ipmi_dimma1_temp
                    name: A1
                  - entity: sensor.ipmi_dimmb1_temp
                    name: B1

              - type: glance
                #title: Ubuntu Status
                columns: 7
                state_color: true
                entities:
                  - entity: sensor.cpu_package_temp
                    name: CPUT
                  - entity: sensor.cpu_speed
                    name: Speed
                  - entity: sensor.cpu_usage
                    name: CPU
                  - entity: sensor.ram_usage
                    name: RAM
                    icon: mdi:chip

                  - entity: sensor.db_size
                    name: DB
                    icon: mdi:database
                  - entity: switch.shp2_socket_server_relay
                    name: S.Plug
                    tap_action: none
                    hold_action: none
                  - entity: sensor.server_z_hb
                    name: Power usage

              - type: custom:bar-card
                columns: 1
                height: 30px
                min: 200
                max: 1700
                positions:
                  icon: 'off'
                  indicator: inside
                  name: inside
                severity:
                  - color: '#40bf40'
                    from: 0
                    to: 1000
                  - color: '#bf9540'
                    from: 1000
                    to: 1500
                  - color: '#bf4040'
                    from: 1500 
                    to: 2000
                padding: 2px
                direction: right
                entities:
                  - entity: sensor.ipmi_fan1
                    name: CPU FAN
              - type: glance
                columns: 6
                state_color: true
                entities:
                  - entity: sensor.ipmi_fan1
                    name: FAN1
                  - entity: sensor.ipmi_fan2
                    name: FAN2
                  - entity: sensor.ipmi_fan3
                    name: FAN3
                  - entity: sensor.ipmi_fan4
                    name: FAN4
                  - entity: sensor.ipmi_fan5
                    name: FAN5
                  - entity: sensor.ipmi_fan6
                    name: FAN6
              - type: glance
                columns: 6
                state_color: true
                show_state: false
                entities:
                  - entity: script.set_fans_to_25
                    name: "25%"
                    icon: mdi:fan
                    hold_action: none
                    tap_action:
                      action: call-service
                      service: script.set_fans_to_25
                  - entity: script.set_fans_to_30
                    name: "30%"
                    icon: mdi:fan
                    hold_action: none
                    tap_action:
                      action: call-service
                      service: script.set_fans_to_30
                  - entity: script.set_fans_to_50
                    name: "50%"
                    icon: mdi:fan
                    hold_action: none
                    tap_action:
                      action: call-service
                      service: script.set_fans_to_50
                  - entity: script.set_fans_to_75
                    name: "75%"
                    icon: mdi:fan
                    hold_action: none
                    tap_action:
                      action: call-service
                      service: script.set_fans_to_75
                  - entity: script.set_fans_to_100
                    name: "100%"
                    icon: mdi:fan
                    hold_action: none
                    tap_action:
                      action: call-service
                      service: script.set_fans_to_100
                  - entity: script.set_fans
                    name: "SET"
                    icon: mdi:cube-send
                    hold_action: none
                    tap_action:
                      action: call-service
                      service: script.set_fans
              - type: entities
                #columns: 4
                state_color: true
                show_state: false
                entities:
                  - input_select.fan_mode
                  - input_number.fan_main
                  - input_number.fan_aux

      - type: vertical-stack
        cards:
          - type: glance
            columns: 6
            state_color: true
            entities:
              - entity: switch.shp2_socket_server_relay
                name: Update
                icon: mdi:recycle
                tap_action:
                  action: call-service
                  service: automation.trigger
                  service_data:
                    entity_id: automation.system_health_monitoring_update
              - entity: sensor.start_time
                name: HA Init
              - entity: sensor.ha_uptime_text
                name: HA Up
              - entity: sensor.host_uptime_text
                name: Host Up
                icon: mdi:clock-outline
              - entity: sensor.ha_installed_version
                name: Installed
              - entity: sensor.ha_latest_version
                name: Latest
                tap_action:
                  action: call-service
                  service: script.ha_released_update

          - type: glance
            columns: 5
            state_color: true
            entities:
              - entity: sensor.nvme0_write_change_1h
                name: N0
              - entity: sensor.nvme1_write_change_1h
                name: N1
              - entity: sensor.nvme2_write_change_1h
                name: N2
              - entity: sensor.nvme3_write_change_1h
                name: N3
              - entity: sensor.boot_write_change_1h
                name: boot
          - type: glance
            columns: 4
            state_color: true
            entities:
              # NVME 0
              - entity: sensor.nvme0_tb_written
                name: nvme0
                icon: mdi:raspberry-pi
              - entity: sensor.nvme0_session_read
                name: R Session
              - entity: sensor.nvme0_session_write
                name: W Session
              - entity: sensor.nvme0_life_left_smart
                name: '%'
              # NVME 1
              - entity: sensor.nvme1_tb_written
                name: nvme1
                icon: mdi:raspberry-pi
              - entity: sensor.nvme1_session_read
                name: R Session
              - entity: sensor.nvme1_session_write
                name: W Session
              - entity: sensor.nvme1_life_left_smart
                name: '%'
              # NVME 2
              - entity: sensor.nvme2_tb_written
                name: nvme2
                icon: mdi:raspberry-pi
              - entity: sensor.nvme2_session_read
                name: R Session
              - entity: sensor.nvme2_session_write
                name: W Session
              - entity: sensor.nvme2_life_left_smart
                name: '%'
              # NVME 3
              - entity: sensor.nvme3_tb_written
                name: nvme3
                icon: mdi:raspberry-pi
              - entity: sensor.nvme3_session_read
                name: R Session
              - entity: sensor.nvme3_session_write
                name: W Session
              - entity: sensor.nvme3_life_left_smart
                name: '%'
          - type: glance
            columns: 4
            state_color: true
            entities:
              # boot
              - entity: sensor.boot_tb_written
                name: boot
                icon: mdi:raspberry-pi
              - entity: sensor.boot_session_read
                name: R Session
              - entity: sensor.boot_session_write
                name: W Session
              - entity: sensor.boot_life_left_smart
                name: '%'
      - type: vertical-stack
        cards:
          # - type: glance
          #   columns: 7
          #   state_color: true
          #   entities:
          #     - entity: sensor.psu_efficiency
          #       name: Eff
          #     - entity: sensor.psu_temperature_0
          #       name: T0
          #     - entity: sensor.psu_temperature_1
          #       name: T1
          #     - entity: sensor.psu_total_watts
          #       name: Total W
          #     - entity: sensor.psu_12v_watts
          #       name: 12V W
          #     - entity: sensor.psu_5v_watts
          #       name: 5V W
          #     - entity: sensor.psu_3v_watts
          #       name: "3.3V W"

          - type: glance
            columns: 4
            state_color: true
            entities:
              - entity: sensor.md1_status
                name: md1

              - entity: sensor.md0_status
                name: md0
              - sensor.md0_disk1_template
              - sensor.md0_disk2_template

          - type: glance
            columns: 3
            state_color: true
            entities:
              - entity: sensor.md0_session_read
                name: md0 R
              - entity: sensor.main_session_read
                name: main R 
              - entity: sensor.media_session_read
                name: M R
              - entity: sensor.md0_session_write
                name: md0 W
              - entity: sensor.main_session_write
                name: main W
              - entity: sensor.media_session_write
                name: M W

          - type: glance
            columns: 5
            state_color: true
            entities:
              # nvme0
              - entity: sensor.nvme0_temp
                name: N0
              # nvme1
              - entity: sensor.nvme1_temp
                name: N1
              # nvme2
              - entity: sensor.nvme2_temp
                name: N2
              # nvme3
              - entity: sensor.nvme3_temp
                name: N3
              # boot
              - entity: sensor.boot_temp
                name: boot

          - type: glance
            columns: 2
            state_color: true
            entities:
              - entity: sensor.media_temp
                name: Media
              - entity: sensor.temp_temp
                name: Temp
          - type: glance
            columns: 3
            state_color: true
            entities:
              # sdf
              - entity: sensor.main0_temp
                name: "#0"
              - entity: sensor.main1_temp
                name: "#1"
              - entity: sensor.main2_temp
                name: "#2"
          - type: glance
            columns: 6
            entities: 
              - entity: sensor.toshiba_hdd_load_cycle_count
                name: Load Cycle
              - entity: sensor.toshiba_hdd_pending_sectors
                name: Pending
              - entity: sensor.toshiba_hdd_power_cycle_count
                name: PWR Cycle
              - entity: sensor.toshiba_hdd_power_on_hours
                name: PWR Hrs
              - entity: sensor.toshiba_hdd_reallocated_count
                name: Realloc
              - entity: sensor.toshiba_hdd_udma_crc
                name: UDMA CRC

################################################################
# radio
################################################################
  - title: Radio
    icon: mdi:radio
    cards:
      - type: vertical-stack
        cards:
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: entities
                state_color: true
                entities:
                  #- group.my_radio
                  - input_select.radio_station
                  - input_select.chromecast_radio
                  - input_number.volume_radio
              - type: horizontal-stack
                cards:
                  - type: entity-button
                    name: Play
                    icon: mdi:play
                    entity: script.radio_on
                    hold_action: none
                    tap_action:
                      action: call-service
                      service: script.radio_on
                  - type: entity-button
                    name: Stop
                    icon: mdi:stop
                    entity: script.radio_off
                    hold_action: none
                    tap_action:
                      action: call-service
                      service: script.radio_off
          - type: glance
            columns: 6
            state_color: true
            entities:
              - entity: media_player.home_mini_v
                name: V
              - entity: media_player.home_mini_s
                name: S
              - entity: media_player.home_mini_k
                name: K
              - entity: media_player.home_mini_mb
                name: MB
              - entity: media_player.home_mini_hb
                name: HB
              - entity: media_player.mpd
                name: MPD

################################################################
# pressure monitoring
################################################################
  - title: Pressure monitoring
    icon: mdi:thermostat
    cards:
      - type: vertical-stack
        cards:
          - type: glance
            columns: 6
            state_color: true
            entities:
              - entity: binary_sensor.pressure_rising_fast
                name: U Fast
              - entity: binary_sensor.pressure_rising_slow
                name: U Slow
              - entity: binary_sensor.pressure_falling_fast
                name: D Fast
              - entity: binary_sensor.pressure_falling_slow
                name: D Slow
              - entity: binary_sensor.temp_rising
                name: T Up
              - entity: binary_sensor.temp_falling
                name: T Down
          - type: history-graph
            hours_to_show: 72
            entities:
              - sensor.0x158d000233fb72_pressure
              - sensor.esp32_node_k_pressure
          - type: history-graph
            hours_to_show: 72
            entities:
              - sensor.pressure_gradient
              - sensor.pressure_gradient_air_valve
      - type: vertical-stack
        cards:
          - type: gauge
            name: Gradient
            entity: sensor.pressure_gradient
            max: 250
            min: -250
            severity:
              blue: -250
              green: 0
              yellow: 250
          - type: custom:mini-graph-card
            entities:
              - sensor.pressure_gradient
            hours_to_show: 48
            points_per_hour: 10
            decimals: 0
            hour24: true
            extrema: true
            labels: true
            line_width: 1
            line_color: blue
            upper_bound: 250
            lower_bound: -250
      - type: vertical-stack
        cards:
          - type: gauge
            name: Gradient
            entity: sensor.pressure_gradient_air_valve
            max: 250
            min: -250
            severity:
              blue: -100
              green: 0
              yellow: 100
          
          - type: custom:mini-graph-card
            entities:
              - sensor.pressure_gradient_air_valve
            hours_to_show: 48
            points_per_hour: 10
            decimals: 0
            hour24: true
            extrema: true
            labels: true
            line_width: 1
            line_color: black
            upper_bound: 250
            lower_bound: -250

################################################################
# MQTT Cross Servers Sensors PAGE
################################################################
  - title: Telemetry
    icon: mdi:desktop-mac-dashboard
    cards:
      - type: vertical-stack
        cards:
          - type: entities
            show_header_toggle: false
            title: Main
            state_color: true
            entities:
              - sensor.ubuntu_telemetry_last_update
              - sensor.ubuntu_uptime
              - sensor.cpu_package_temp
              - sensor.cpu_usage
              - sensor.ram_usage
              - sensor.ssd_usage
              - type: divider
              - sensor.ipmi_cpu_temp
              - sensor.ipmi_pch_temp
              - sensor.ipmi_system_temp
              - sensor.ipmi_dimma1_temp
              - sensor.ipmi_dimmb1_temp
          # - type: entities
          #   show_header_toggle: false
          #   title: MQTT Server
          #   state_color: true
          #   entities:
          #     - sensor.mqtt_telemetry_last_update
          #     - sensor.mqtt_uptime
          #     - sensor.mqtt_cpu_temp
          #     - sensor.mqtt_cpu_usage
          #     - sensor.mqtt_ram_usage
          #     - sensor.mqtt_ssd_usage
          #     - sensor.mqtt_ssd_temp
          #     - sensor.mqtt_ssd_total_lba_written
          #     - sensor.mqtt_ssd_life_left

          # - type: entities
          #   show_header_toggle: false
          #   title: RPI
          #   state_color: true
          #   entities:
          #     - sensor.rpi_telemetry_last_update
          #     - sensor.rpi_uptime
          #     - entity: sensor.rpi_state
          #       name: RPI HA Uptime
          #     - entity: sensor.rpi_version
          #       name: HA Version
          #     - sensor.rpi_cpu_temp
          #     - sensor.rpi_cpu_usage
          #     - sensor.rpi_ram_usage
          #     - sensor.rpi_ssd_usage
          #     - sensor.rpi_ssd_temp
          #     - sensor.rpi_ssd_total_lba_written
          #     - sensor.rpi_ssd_session_write
          #     - sensor.rpi_sda_gb_per_hour
          #     - sensor.rpi_sda_gb_per_day
          #     - sensor.rpi_sda_life_left
          #     - sensor.rpi_ssd_life_left
          - type: entities
            show_header_toggle: false
            title: j3455
            state_color: true
            entities:
              - sensor.j3455_telemetry_last_update
              - sensor.j3455_uptime
              - entity: sensor.j3455_state
                name: j3455 HA Uptime
              - entity: sensor.j3455_version
                name: j3455 HA Version
              - sensor.j3455_cpu_temp
              - sensor.j3455_cpu_usage
              - sensor.j3455_ram_usage
              - sensor.j3455_ssd_usage
              - sensor.j3455_ssd_temp
              - sensor.j3455_ssd_total_lba_written
              - sensor.j3455_ssd_life_left
      - type: vertical-stack
        cards:
          - type: entities
            show_header_toggle: false
            title: m6800
            state_color: true
            entities:
              - sensor.m6800_telemetry_last_update
              - sensor.m6800_uptime
              - sensor.m6800_cpu_temperature
              - sensor.m6800_cpu_load
              - sensor.m6800_memory_usage
              - sensor.m6800_drive_c_temperature
              - sensor.m6800_drive_d_temperature
              - sensor.m6800_drive_e_temperature
              - sensor.m6800_drive_f_temperature
              - sensor.m6800_drive_c_usage
              - sensor.m6800_drive_d_usage
              - sensor.m6800_drive_e_usage
              - sensor.m6800_drive_f_usage
              - sensor.m6800_860pro_life_left_smart
              - sensor.m6800_840evo_life_left_smart

      - type: vertical-stack
        cards:
          - type: entities
            show_header_toggle: false
            title: i5
            state_color: true
            entities:
              - sensor.i5_telemetry_last_update
              - sensor.i5_uptime
              - sensor.i5_cpu_temperature
              - sensor.i5_cpu_load
              - sensor.i5_cpu_fan 
              - sensor.i5_memory_usage
              - sensor.i5_ssd_temperature
              - sensor.i5_ssd_usage
              - sensor.i5_840pro_life_left_smart
              - sensor.i5_case_fan
              
      - type: vertical-stack
        cards:
          - type: entities
            show_header_toggle: false
            title: 2620v
            state_color: true
            entities:
              - sensor.2620v_telemetry_last_update
              - sensor.2620v_uptime
              - sensor.2620v_cpu_temperature
              - sensor.2620v_cpu_load
              - sensor.2620v_cpu_fan
              - sensor.2620v_memory_usage
              - sensor.2620v_hdd_temperature
              - sensor.2620v_ssd_temperature
              - sensor.2620v_ssd_usage
              - sensor.2620v_8200pro_power_on_hours
              - sensor.2620v_8200pro_total_gb_written
              - sensor.2620v_case_fan
              - sensor.2620v_rx580_fan1
              - sensor.2620v_rx580_fan2
              - sensor.2620v_rx580_gpu_load
              - sensor.2620v_rx580_gpu_temperature
  
          # - type: entities
          #   show_header_toggle: false
          #   title: u430p
          #   state_color: true
          #   entities:
          #     - sensor.u430p_telemetry_last_update
          #     - sensor.u430p_uptime
          #     - sensor.u430p_cpu_temperature
          #     - sensor.u430p_cpu_load
          #     - sensor.u430p_memory_usage
          #     - sensor.u430p_ssd_temperature
          #     - sensor.u430p_ssd_usage
          #     - sensor.u430p_840pro_calc_life_left
          #     - sensor.u430p_m2_usage
          #     - sensor.u430p_sc2_m2_calc_life_left

################################################################
# ESP States
################################################################
  - title: ESPs
    icon: mdi:car-esp
    cards:
      - type: entities
        title: ESPs State
        show_header_toggle: false
        state_color: true
        entities:
          - binary_sensor.sonoff_pow_r2_2_status
          - binary_sensor.esp32_bathroom_node_status
          - binary_sensor.sonoff_pow_r2_1_status
          - binary_sensor.btf_pixel_strip_status
          - binary_sensor.shp2_socket_1_status
          - binary_sensor.shp6_socket_1_status
          - binary_sensor.shp6_socket_2_status

          - type: divider
          - binary_sensor.esp01_weight_pad_status
          - binary_sensor.esp32_node_k_status
          #- binary_sensor.ss5_hood_status
          - binary_sensor.esp32_hood_k_status

          - type: divider        
          - binary_sensor.d1mini_bed_leds_status
          - binary_sensor.esp32_node_v_status
          - binary_sensor.sonoff_basic_4_status
          - binary_sensor.digma_ir_v_status

          - type: divider          
          - binary_sensor.esp8266_pzem_hb_status
          - binary_sensor.shp2_socket_server_status
          - binary_sensor.esp32_ble_tracker_status
          - binary_sensor.esp32_domofon_status

          - type: divider          
          - binary_sensor.esp32_node_mb_status
          - binary_sensor.digma_ir_mb_status
          - binary_sensor.sonoff_basic_3_status
          - binary_sensor.shp2_socket_2_status
          - binary_sensor.lt11_1_status

          - type: divider          
          - binary_sensor.d1mini_co2_s_status
          - binary_sensor.digma_ir_s_status
          - binary_sensor.avatto_socket_1_status

      - type: entities
        title: RSSI
        show_header_toggle: false
        state_color: true
        entities:
          - sensor.sonoff_pow_r2_2_wifi_rssi
          - sensor.esp32_bathroom_node_wifi_rssi
          - sensor.sonoff_pow_r2_1_wifi_rssi
          - sensor.btf_pixel_strip_wifi_rssi
          - sensor.shp2_socket_1_wifi_rssi
          - sensor.shp6_socket_1_wifi_rssi
          - sensor.shp6_socket_2_wifi_rssi

          - type: divider
          - sensor.esp01_weight_pad_wifi_rssi
          - sensor.esp32_node_k_wifi_rssi
          #- sensor.ss5_hood_wifi_rssi
          - sensor.esp32_hood_k_wifi_rssi

          - type: divider          
          - sensor.d1mini_bed_leds_wifi_rssi
          - sensor.esp32_node_v_wifi_rssi
          - sensor.sonoff_basic_4_wifi_rssi
          - sensor.digma_ir_v_wifi_rssi
          
          - type: divider          
          - sensor.esp8266_pzem_hb_wifi_rssi
          - sensor.shp2_socket_server_wifi_rssi
          - sensor.esp32_ble_tracker_wifi_rssi
          - sensor.esp32_domofon_wifi_rssi

          - type: divider          
          - sensor.esp32_node_mb_wifi_rssi
          - sensor.digma_ir_mb_wifi_rssi
          - sensor.sonoff_basic_3_wifi_rssi
          - sensor.shp2_socket_2_wifi_rssi
          - sensor.lt11_1_wifi_rssi

          - type: divider          
          - sensor.d1mini_co2_s_wifi_rssi
          - sensor.digma_ir_s_wifi_rssi
          - sensor.avatto_socket_1_wifi_rssi


      - type: entities
        title: Uptime
        show_header_toggle: false
        state_color: true
        entities:
          - sensor.sonoff_pow_r2_2_uptime
          - sensor.esp32_bathroom_node_uptime
          - sensor.sonoff_pow_r2_1_uptime
          - sensor.btf_pixel_strip_uptime
          - sensor.shp2_socket_1_uptime
          - sensor.shp6_socket_1_uptime
          - sensor.shp6_socket_2_uptime

          - type: divider
          - sensor.esp01_weight_pad_uptime
          - sensor.esp32_node_k_uptime
          #- sensor.ss5_hood_uptime
          - sensor.esp32_hood_k_uptime

          - type: divider          
          - sensor.d1mini_bed_leds_uptime
          - sensor.esp32_node_v_uptime
          - sensor.sonoff_basic_4_uptime
          - sensor.digma_ir_v_uptime

          - type: divider          
          - sensor.esp8266_pzem_hb_uptime
          - sensor.shp2_socket_server_uptime
          - sensor.esp32_ble_tracker_uptime
          - sensor.esp32_domofon_uptime

          - type: divider          
          - sensor.esp32_node_mb_uptime
          - sensor.digma_ir_mb_uptime
          - sensor.sonoff_basic_3_uptime
          - sensor.shp2_socket_2_uptime
          - sensor.lt11_1_uptime

          - type: divider          
          - sensor.d1mini_co2_s_uptime
          - sensor.digma_ir_s_uptime
          - sensor.avatto_socket_1_uptime

################################################################
# Lamps Reset
################################################################
  - title: WiFi Devices Restart Control
    icon: mdi:wifi-strength-2-alert #mdi:lightbulb-off #mdi:file-settings-variant
    cards:
      - type: vertical-stack
        cards: 
          - type: entities
            title: Statuses
            show_header_toggle: false
            state_color: true
            entities:
              - light.round_led_mb
              - type: divider
              - light.square_led_s
              - type: divider
              - light.round_led_k
              - type: divider
              - light.round_led_hs
              - type: divider
              - light.square_led_v
              - type: divider
              - fan.humidifier2
              - type: divider
              - light.bedside_mb
              - type: divider
              - light.mirror_light_b
              - type: divider
              - light.led_strip_hb
              - type: divider
              - light.led_strip_entrance_hb
              - type: divider
              - light.led_color_v
              - type: divider
              - light.led_white_mb
              - type: divider
              - light.led_white_s
              - type: divider
              - light.led_color_mb
              - type: divider
              - fan.purifier2s


      - type: vertical-stack
        cards: 
          - type: entities
            title: Switches
            show_header_toggle: false
            state_color: true
            entities:
              - switch.sonoff_basic_3_relay
              - type: divider
              - switch.sonoff_mini_2_relay
              - type: divider
              - switch.0x158d0002a36f7f_channel_2
              - type: divider
              - switch.0x4cf8cdf3c7a9a48_channel_1
              - type: divider
              - switch.sonoff_basic_4_relay #switch.plug_158d00020b4971
              - type: divider
              - switch.0x158d000392623d_switch
              - type: divider
              - switch.0x158d00039bd56d_switch
              - type: divider
              - switch.esp32_bathroom_node_relay_5
              - type: divider
              - switch.0x158d00023e5812_switch
              - type: divider
              - switch.gateway_plug_entrance_hb
              - type: divider
              - switch.0x158d00023a657a_switch
      - type: vertical-stack
        cards: 
          - type: entities
            title: Scripts
            show_header_toggle: false
            state_color: true
            entities:
              - script.round_led_mb_restart
              - type: divider
              - script.square_led_s_restart
              - type: divider
              - script.round_led_k_restart
              - type: divider
              - script.round_led_hs_restart
              - type: divider
              - script.square_led_v_restart
              - type: divider
              - script.humidifier2_restart
              - type: divider
              - script.bedside_mb_restart
              - type: divider
              - script.mirror_light_b_restart
              - type: divider
              - script.led_strip_hb_restart
              - type: divider
              - script.led_strip_entrance_hb_restart
              - type: divider
              - script.led_color_v_restart

################################################################
# z2m
################################################################
  # - title: z2m
  #   icon: mdi:zigbee
  #   cards:
  #     - type: vertical-stack
  #       cards:
  #         - type: entities
  #           title: Zigbee2mqtt
  #           show_header_toggle: false
  #           entities:
  #             - entity: sensor.zigbee2mqtt_bridge_state
  #             - entity: sensor.zigbee2mqtt_permit_join
  #             - entity: sensor.zigbee2mqtt_version
  #             - entity: sensor.zigbee2mqtt_coordinator_version
  #             - entity: sensor.zigbee2mqtt_network_channel
  #             - entity: sensor.zigbee2mqtt_network_panid
  #             - entity: sensor.zigbee2mqtt_network_extended_panid
  #             - type: divider
  #             - entity: input_text.zigbee2mqtt_map_rebuild
  #             - entity: sensor.zigbee2mqtt_last_message
  #             - entity: input_select.zigbee2mqtt_log_level
  #             - type: divider
  #             - entity: script.zigbee2mqtt_permit_join
  #             - entity: switch.zigbee2mqtt_main_join
  #             - entity: timer.zigbee2mqtt_permit_join
  #             - type: divider
  #             - entity: script.zigbee2mqtt_linkuality_check
  #             - entity: script.zigbee2mqtt_lastseen_check
  #             - entity: script.zigbee2mqtt_map_rebuild
  #             - type: divider
  #             - sensor.zigbee2mqtt_addon_restart
  #             - entity: script.zigbee2mqtt_restart


  #     - type: custom:stack-in-card
  #       mode: vertical
  #       cards:
  #         - type: glance
  #           entities:
  #             - entity: binary_sensor.esp32_ble_tracker_green
  #               name: green
  #             - entity: binary_sensor.esp32_ble_tracker_pink
  #               name: pink
  #             - entity: binary_sensor.esp32_ble_tracker_grey
  #               name: grey
  #             - entity: binary_sensor.esp32_ble_tracker_white
  #               name: white

  # - title: Kiosk
  #   icon: mdi:camera
  
  #   cards:
  #     - type: picture-entity
  #       camera_view: live
  #       aspect_ratio: '16x9'
  #       entity: camera.door_hb
  #       show_name: false
  #       show_state: false
        

  - title: Temperature
    icon: mdi:home-thermometer-outline
    cards:
      - type: vertical-stack
        cards:
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d0001e6d85a_temperature
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d0001e58714_temperature
              - sensor.esp32_node_v_temperature
              - sensor.582d34530ee0_temperature
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d000222c746_temperature
              - sensor.esp32_node_mb_temperature
          - type: history-graph
            hours_to_show: 24
            entities:
              - sensor.0x158d000239ad5b_temperature
              - sensor.esp32_node_mb_outside
      - type: vertical-stack
        cards:              
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d0002464ec0_temperature

          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d0001e586af_temperature
              - sensor.esp32_node_k_temperature
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d00020d7c3a_temperature
              - sensor.e72e0120fcdc_temperature
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d0001e58754_temperature
              - sensor.e72e00d2911f_temperature
              - sensor.sonoff_pow_r2_2_temperature


      - type: vertical-stack
        cards:              
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d000233fb72_temperature


          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d000237167c_temperature
              - sensor.0x158d0002461e5b_temperature
    
          - type: history-graph
            hours_to_show: 24
            entities:
              - sensor.esp32_hood_k_oven_tcouple
              - sensor.esp32_hood_k_hood_tcouple
              - sensor.esp32_hood_k_dallas
              - sensor.esp32_hood_k_bme280_temperature

  - title: Humidity
    icon: mdi:water-percent
    cards:
      - type: vertical-stack
        cards:
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d0001e6d85a_humidity
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d0001e58714_humidity
              - sensor.esp32_node_v_humidity
              - sensor.582d34530ee0_humidity
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d000222c746_humidity
              - sensor.esp32_node_mb_humidity
          - type: history-graph
            hours_to_show: 24
            entities:
              - sensor.0x158d000239ad5b_humidity
      - type: vertical-stack
        cards:              
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d0002464ec0_humidity

          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d0001e586af_humidity
              - sensor.esp32_node_k_humidity
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d00020d7c3a_humidity
              - sensor.e72e0120fcdc_humidity
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d0001e58754_humidity
              - sensor.e72e00d2911f_humidity
              - sensor.sonoff_pow_r2_2_humidity


      - type: vertical-stack
        cards:              
          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d000233fb72_humidity


          - type: history-graph
            hours_to_show: 48
            entities:
              - sensor.0x158d000237167c_humidity
              - sensor.0x158d0002461e5b_humidity
    
          - type: history-graph
            hours_to_show: 24
            entities:
              - sensor.esp32_hood_k_bme280_humidity
          
  - title: All GW3 Switches
    icon: mdi:electric-switch
    cards:
      - type: entities
        show_header_toggle: false
        state_color: true
        entities:
          - entity: switch.0x158d0001e85086_switch
            secondary_info: last-changed
          - entity: switch.0x158d0001f2630e_switch
            secondary_info: last-changed
          - entity: switch.0x158d000205a835_switch
            secondary_info: last-changed
          - entity: switch.0x158d000223921b_channel_1
            secondary_info: last-changed
          - entity: switch.0x158d000223921b_channel_2
            secondary_info: last-changed
          - entity: switch.0x158d000230fc52_switch
            secondary_info: last-changed
          - entity: switch.0x158d000239097a_switch
            secondary_info: last-changed
          - entity: switch.0x158d0002395d58_switch
            secondary_info: last-changed
          - entity: switch.0x158d0002395dc9_switch
            secondary_info: last-changed
          - entity: switch.0x158d00023a657a_switch
            secondary_info: last-changed
          - entity: switch.0x158d00023e5812_switch
            secondary_info: last-changed
          - entity: switch.0x158d00024517fe_switch
            secondary_info: last-changed
          - entity: switch.0x158d0002451850_switch
            secondary_info: last-changed
          - entity: switch.0x158d000246776f_switch
            secondary_info: last-changed
          - entity: switch.0x158d0002467773_switch
            secondary_info: last-changed
          - entity: switch.0x158d0002468fbd_switch
            secondary_info: last-changed
          - entity: switch.0x158d0002476ed1_switch
            secondary_info: last-changed
          - entity: switch.0x158d0002482619_switch
            secondary_info: last-changed
      - type: entities
        show_header_toggle: false
        state_color: true
        entities:
          - entity: switch.0x158d000249b25b_switch
            secondary_info: last-changed
          - entity: switch.0x158d000249b26b_switch
            secondary_info: last-changed
          - entity: switch.0x158d000253f04a_channel_2
            secondary_info: last-changed
          - entity: switch.0x158d000253f04a_channel_2
            secondary_info: last-changed
          - entity: switch.0x158d00028a54e4_switch
            secondary_info: last-changed
          - entity: switch.0x158d00028b4fc3_switch
            secondary_info: last-changed
          - entity: switch.0x158d00028c9875_switch
            secondary_info: last-changed
          - entity: switch.0x158d000290a093_switch
            secondary_info: last-changed
          - entity: switch.0x158d000290a0bc_switch
            secondary_info: last-changed
          - entity: switch.0x158d0002924790_switch
            secondary_info: last-changed
          - entity: switch.0x158d0002a36433_channel_1
            secondary_info: last-changed
          - entity: switch.0x158d0002a36433_channel_2
            secondary_info: last-changed
          - entity: switch.0x158d000366815b_channel_1
            secondary_info: last-changed
          - entity: switch.0x158d000366815b_channel_2
            secondary_info: last-changed
          - entity: switch.0x4cf8cdf3c7a9a48_channel_1
            secondary_info: last-changed
          - entity: switch.0x4cf8cdf3c7a9a48_channel_2
            secondary_info: last-changed
          - entity: switch.0x4cf8cdf3c7a9a48_channel_3
            secondary_info: last-changed

      - type: entities
        show_header_toggle: false
        state_color: true
        entities:
          - entity: switch.0x158d0002a36f7f_channel_1
            secondary_info: last-changed
          - entity: switch.0x158d0002a36f7f_channel_2
            secondary_info: last-changed
          - entity: switch.0x158d000322e1d9_switch
            secondary_info: last-changed
          - entity: switch.0x158d000322e30c_switch
            secondary_info: last-changed
          - entity: switch.0x158d000344998e_switch
            secondary_info: last-changed
          - entity: switch.0x158d000345119e_switch
            secondary_info: last-changed
          - entity: switch.0x158d0003535ee5_switch
            secondary_info: last-changed
          - entity: switch.0x158d0003539447_switch
            secondary_info: last-changed
          - entity: switch.0x158d000353a2e3_switch
            secondary_info: last-changed
          - entity: switch.0x158d000358c773_switch
            secondary_info: last-changed
          - entity: switch.0x158d00035c194f_switch
            secondary_info: last-changed
          - entity: switch.0x158d00035f44a7_switch
            secondary_info: last-changed
          - entity: switch.0x158d0003600ea4_switch
            secondary_info: last-changed
          - entity: switch.0x158d00036148b9_switch
            secondary_info: last-changed
          - entity: switch.0x158d00039258de_switch
            secondary_info: last-changed
          - entity: switch.0x158d000392623d_switch
            secondary_info: last-changed
          - entity: switch.0x158d00039bd56d_switch
            secondary_info: last-changed
  - title: All GW3 Sensors
    icon: mdi:radiobox-marked
    cards:
      - type: entities
        entities:
          - entity: binary_sensor.0x158d0002a1a4b2_contact
            name: Bottom Lock Sensor
            secondary_info: last-changed
          - entity: binary_sensor.bottom_lock
            name: Bottom Lock Template
            secondary_info: last-changed
          - type: divider
          - entity: binary_sensor.0x158d0002b7c2c8_contact
            name: Top lock Sensor
            secondary_info: last-changed
          - entity: binary_sensor.top_lock
            name: Top Lock Template
            secondary_info: last-changed
      - type: entities
        state_color: true
        #columns: 7
        entities:
          - entity: binary_sensor.0x158d0001d5995e_motion
            name: HB - Mid Dooor
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001e05856_motion
            name: HB - Entrance
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b482e9_motion
            name: HB - Fridge
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000224f89f_motion
            name: S - Entrance
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0003140824_motion
            name: S - Window
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001ae9f61_motion
            name: HS - Near
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b43ad4_motion
            name: HS - Far
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001aea602_motion
            name: St
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001e53cda_motion
            name: MB
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001e54280_motion
            name: T
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000236bb94_motion
            name: V
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000236bc6d_motion
            name: B
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b4729d_motion
            name: K - Main
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b48381_motion
            name: K - Entrance
            secondary_info: last-changed            
      - type: entities
        show_header_toggle: false
        state_color: true
        entities:
          - entity: binary_sensor.0x158d0001ae9f61_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001aea602_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001d5995e_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001e05856_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001e53cda_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001e54280_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001e5d6be_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0001ef2ffc_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000200ad58_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000224f89f_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d00022ccffe_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d00023297e7_moisture
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000232ddd6_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000232de79_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d00023684c2_moisture
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000236bb94_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000236bc6d_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000236fcd5_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000236fdc9_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002373a67_moisture
            secondary_info: last-changed
          - entity: binary_sensor.0x158d00024bcf85_gas
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002529b9c_contact
            secondary_info: last-changed
      - type: entities
        show_header_toggle: false
        state_color: true
        entities:
          - entity: binary_sensor.0x158d000252acba_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d00025315e9_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002531749_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d00025370d1_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d00025371f6_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000253722b_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d00027129ae_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002a14c5e_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002a1a47a_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002a1a4b2_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b43ad4_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b4729d_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b482e9_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b48381_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002b7c2c8_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0002c92f31_smoke
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0003140824_motion
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0003fa6cf5_contact #binary_sensor.0x158d0003262a35_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d0003262ba8_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d00035c6905_contact
            secondary_info: last-changed
          - entity: binary_sensor.0x158d000423f316_contact
            secondary_info: last-changed


          

  - title: Testing
    icon: mdi:find-replace
    cards:
      - type: entities
        show_header_toggle: false
        state_color: true
        entities:
          - sensor.esp32_hood_k_bme280_humidity
          - sensor.esp32_hood_k_bme280_pressure
          - sensor.esp32_hood_k_bme280_temperature
          - sensor.esp32_hood_k_dallas
          - sensor.esp32_hood_k_hood_tcouple
          - sensor.esp32_hood_k_oven_tcouple
          - switch.esp32_hood_k_fan
          - switch.esp32_hood_k_light
          - binary_sensor.esp32_hood_k_hood_status
          
      - type: glance
        entities:
          - entity: binary_sensor.esp32_ble_tracker_green
            name: None(green)
          - entity: binary_sensor.esp32_ble_tracker_pink
            name: Sandra(pink)
          - entity: binary_sensor.esp32_ble_tracker_grey
            name: Vova(grey)
          - entity: binary_sensor.esp32_ble_tracker_white
            name: Dima(white)
      - type: entities
        show_header_toggle: false
        state_color: true
        entities:
          - entity: switch.air_freshener_spray
            name: Spray
          - entity: switch.air_freshener_sleep
            name: Sleep
          - entity: counter.air_freshener_toilet
          - entity: input_text.air_freshener_last_heartbeat
            name: Last hearbeat
          - entity: input_text.air_freshener_last_spray
            name: Last spray
          - entity: input_text.air_freshener_toilet_tank_replacement
            name: Last tank replace
          - entity: script.toilet_air_freshener_counter_reset
          - type: divider
          - entity: switch.esp01_air_freshener_restart
            secondary_info: last-changed
          - binary_sensor.esp01_air_freshener_status
          - sensor.esp01_air_freshener_uptime_s
          - sensor.esp01_air_freshener_vcc
          - sensor.esp01_air_freshener_on_flag
          - sensor.esp01_air_freshener_sleep_avail
          - switch.esp01_air_freshener_valve

      - type: entities
        show_header_toggle: false
        state_color: true
        entities:
          - input_boolean.bed_led_enable
          - binary_sensor.light_outside_mi
          - type: divider
          - binary_sensor.d1mini_bed_leds_ha_bed_led_enabled
          - binary_sensor.d1mini_bed_leds_ha_bed_led_enabled_binary
          - type: divider          
          - device_tracker.d1_mini_bed_led
          - sensor.d1mini_bed_leds_light
          - binary_sensor.d1mini_bed_leds_motion_dima
          - binary_sensor.d1mini_bed_leds_motion_sandra
          - switch.d1mini_bed_leds_restart
          - binary_sensor.d1mini_bed_leds_status
          - sensor.d1mini_bed_leds_sun_azimuth
          - sensor.d1mini_bed_leds_sun_elevation
          - sensor.d1mini_bed_leds_uptime
          - sensor.d1mini_bed_leds_uptime_s
          - sensor.d1mini_bed_leds_wifi_rssi
          - light.d1mini_bed_leds_strip_dima
          - light.d1mini_bed_leds_strip_sandra
      - type: entities
        show_header_toggle: false
        state_color: true
        entities:
          - device_tracker.esp8266_pzem_hb
          - sensor.esp8266_pzem_hb_current
          - sensor.esp8266_pzem_hb_dallas
          - sensor.esp8266_pzem_hb_energy
          - sensor.esp8266_pzem_hb_energy_daily
          - sensor.esp8266_pzem_hb_energy_daily_day
          - sensor.esp8266_pzem_hb_energy_daily_night
          - sensor.esp8266_pzem_hb_energy_monthly
          - sensor.esp8266_pzem_hb_energy_monthly_day
          - sensor.esp8266_pzem_hb_energy_monthly_night
          - switch.esp8266_pzem_hb_energy_reset_monthly
          - switch.esp8266_pzem_hb_energy_reset_monthly_day
          - switch.esp8266_pzem_hb_energy_reset_monthly_night
          - sensor.esp8266_pzem_hb_frequency
          - sensor.esp8266_pzem_hb_humidity
          - sensor.esp8266_pzem_hb_power
          - sensor.esp8266_pzem_hb_power_factor
          - sensor.esp8266_pzem_hb_power_day
          - sensor.esp8266_pzem_hb_power_night
          - sensor.esp8266_pzem_hb_power_kw
          - sensor.esp8266_pzem_hb_pressure
          - sensor.esp8266_pzem_hb_resistance
          - switch.esp8266_pzem_hb_restart
          - binary_sensor.esp8266_pzem_hb_status
          - sensor.esp8266_pzem_hb_temperature
          - sensor.esp8266_pzem_hb_uptime
          - sensor.esp8266_pzem_hb_uptime_s
          - sensor.esp8266_pzem_hb_vcc
          - sensor.esp8266_pzem_hb_voltage
          - sensor.esp8266_pzem_hb_wifi_rssi
          - binary_sensor.esp8266_pzem_hb_time_isvalid

      - type: vertical-stack
        cards:
          - type: entities
            entities:
              - entity: sensor.esp32_node_k_humidity
                name: bme280 H
              - entity: sensor.esp32_node_k_dht11_humidity
                name: dht11 H
              - type: divider
              - entity: sensor.esp32_node_k_temperature
                name: bme280 T
              - entity: sensor.esp32_node_k_dht11_temperature
                name: dht11 T
          - type: history-graph
            hours_to_show: 48
            entities:
              - entity: sensor.esp32_node_k_humidity
                name: bme280 H
              - entity: sensor.esp32_node_k_dht11_humidity
                name: dht11 H
          - type: history-graph
            hours_to_show: 48
            entities:
              - entity: sensor.esp32_node_k_temperature
                name: bme280 T
              - entity: sensor.esp32_node_k_dht11_temperature
                name: dht11 T


          
      - type: custom:auto-entities
        show_empty: false
        card:
          type: entities
          #title: Lights on
          show_header_toggle: false
          state_color: true
        filter:
          include:
            - domain: light
              state: "on"
              options:
                tap_action:
                  action: toggle
          exclude:
            - entity_id: "*esp32_domofon*"

      - type: history-graph
        hours_to_show: 48
        entities:
          - entity: sensor.esp32_node_mb_outside #sensor.0x158d0001e8995a_temperature
            name: T
          - entity: sensor.temperature_max_out
            name: Tmax
          - entity: sensor.temperature_min_out
            name: Tmin

      - type: custom:auto-entities
        card:
          show_header_toggle: false
          type: entities
          title: Battery
        filter:
          exclude: 
            - state: '>30'
          include:
            - entity_id: 'sensor.*_battery'
        sort:
          method: false
          numeric: true
          reverse: true

      # - type: entities
      #   show_header_toggle: false
      #   state_color: true      
      #   entities:
      #     - device_tracker.esp32_node_hs
      #     - sensor.esp32_node_hs_humidity
      #     - sensor.esp32_node_hs_illuminance
      #     - binary_sensor.esp32_node_hs_motion
      #     - sensor.esp32_node_hs_pressure
      #     - switch.esp32_node_hs_restart
      #     - binary_sensor.esp32_node_hs_status
      #     - sensor.esp32_node_hs_temperature
      #     - sensor.esp32_node_hs_uptime
      #     - sensor.esp32_node_hs_uptime_s
      #     - sensor.esp32_node_hs_wifi_rssi
      #     - light.esp32_node_hs_led

      - type: custom:auto-entities
        card:
          type: entities
          #title: Unavailables
          show_header_toggle: false
          state_color: true
        filter:
          include:
            - state: 'unavailable'
          exclude: 
            - entity_id: '*esp01_air_freshener_*'
        sort:
          method: false
          numeric: true
          reverse: true

  - title: Radio Quality [GW3]
    icon: mdi:radio-tower
    panel: true
    cards:
      - type: vertical-stack
        cards:
          # Gateways
          - type: markdown
            #content: '<center> <ha-icon icon="mdi:router-wireless"></ha-icon> </center>'
            content: '### <center> Gateways </center>'
          - type: 'custom:flex-table-card'
            #title: Gateways
            clickable: false
            entities:
              include: 
                - sensor.*_gateway
            columns:
              - data: friendly_name
                name: Friendly Name
                modify: '(x+"").replace(/ Gateway$/,"")'
              - data: network_pan_id
                name: Network PAN ID
                modify: x+''
              - data: radio_tx_power
                name: Radio TX Power
                modify: 'isNaN(parseInt(x, 10)) ? "" : parseInt(x, 10)'
              - data: radio_channel
                name: Radio Channel
                modify: 'isNaN(parseInt(x, 10)) ? "" : parseInt(x, 10)'
              - data: free_mem
                name: Memory Free (KB)
                modify: 'isNaN(parseInt(x, 10)) ? "" : parseInt(x, 10)'
              - data: load_avg
                name: Load Avg (1m, 5m, 15m)
                modify: '(x+"").split("|").slice(0, 3).join(", ")'
              - data: rssi
                name: RSSI
                modify: 'isNaN(parseInt(x, 10)) ? "" : parseInt(x, 10)'
              - data: uptime
                name: Gateway Uptime
                modify: x+''
              - data: state
                name: Connected Since
                modify: >
                  var dt = new Date(x);
                  var hrs = parseInt((Date.now()-Date.parse(x)) / 3600000);
                  var min = parseInt(((Date.now()-Date.parse(x)) / 60000) % 60);
                  var sec = parseInt(((Date.now()-Date.parse(x)) / 1000) % 60);
                  hrs = (hrs < 10) ? "0" + hrs : hrs;
                  min = (min < 10) ? "0" + min : min;
                  sec = (sec < 10) ? "0" + sec : sec;
                  dt.toLocaleString(['ru-RU', 'en-US']) +
                  " (Up: " + hrs + ":" + min + ":" + sec + ")"
            css:
              table+: 'padding-top: 15px;'
              'tbody tr:nth-child(even)': 'background-color: #a2542f6;'
              td.left: 'padding: 10px 10px 10px 10px'
              th.left: 'padding: 0px 0px 10px 10px'
          # ZigBee
          - type: markdown
            #content: '<center> <ha-icon icon="mdi:zigbee"></ha-icon> </center>'
            content: '### <center> ZigBee </center>'
          - type: 'custom:flex-table-card'
            #title: ZigBee
            clickable: false
            entities:
              include: 
                - sensor.*_zigbee
            sort_by: state- #friendly_name #state- #ieee
            #max_rows: 20
            columns:
              - data: friendly_name
                name: Friendly Name
                modify: 'x.replace(/ Zigbee$/,"")'
              - data: ieee
                name: IEEE
                modify: (x+'').toLowerCase()
              - data: nwk
                name: NWK
                modify: (x+'').replace(/^0x/,"").toLowerCase()
              - data: parent
                name: Parent
                modify: (x+'').replace(/^0x/,"").toLowerCase()
              - data: type
                name: Type
                modify: (x+'').replace(/^-$/, "child device")
              - data: msg_received
                name: Received
                modify: 'isNaN(parseInt(x, 10)) ? 0 : parseInt(x, 10)'
              - data: msg_missed
                name: Missed
                modify: 'isNaN(parseInt(x, 10)) ? 0 : parseInt(x, 10)'
              - data: unresponsive
                name: Unresponsive
                modify: 'isNaN(parseInt(x, 10)) ? 0 : parseInt(x, 10)'
              - data: link_quality
                name: LQI
                modify: 'isNaN(parseInt(x, 10)) ? "" : parseInt(x, 10)'
              - data: rssi
                name: RSSI
                modify: 'isNaN(parseInt(x, 10)) ? "" : parseInt(x, 10)'
              - data: last_msg
                name: Last Message
                modify: x+''
              - data: state
                name: Last Seen, min ago
                modify: Math.round((Date.now()-Date.parse(x))/60000) #(Date.now()-Date.parse(x))/60000
                # modify: >
                #   var dt = new Date(0,0,0,0,0,0,(Date.now()-Date.parse(x)));
                #   isFinite(dt) ? dt.toTimeString().split(" ")[0] : ""
            css:
        #      thead th: 'align-content: center;'
              table+: 'padding-top: 15px;'
              'tbody tr:nth-child(even)': 'background-color: #a2542f6;'
              td.left: 'padding: 10px 10px 10px 10px'
              th.left: 'padding: 0px 0px 10px 10px'
          # Bluetooth
          - type: markdown
            #content: '<center> <ha-icon icon="mdi:bluetooth"></ha-icon> </center>'
            content: '### <center> Bluetooth </center>'
          - type: 'custom:flex-table-card'
            #title: Bluetooth
            clickable: false
            entities:
              include: 
                - sensor.*_ble
            sort_by: mac
            #max_rows: 20
            columns:
              - data: friendly_name
                name: Friendly Name
                modify: 'x.replace(/ Ble$/,"")'
              - data: mac
                name: MAC
                modify: (x+'').replace(/(.{2}(?!$))/g,"$1:")
              - data: msg_received
                name: Received
                modify: 'isNaN(parseInt(x, 10)) ? "" : parseInt(x, 10)'
              - data: state
                name: Last Seen
                modify: >
                  var dt = new Date(0,0,0,0,0,0,(Date.now()-Date.parse(x)));
                  isFinite(dt) ? dt.toTimeString().split(" ")[0] : ""
            css:
        #      thead th: 'align-content: center;'
              table+: 'padding-top: 15px;'
              'tbody tr:nth-child(even)': 'background-color: #a2542f6;'
              td.left: 'padding: 10px 10px 10px 10px'
              th.left: 'padding: 0px 0px 10px 10px'

  - title: GW3 Devices List
    icon: mdi:video-input-antenna
    panel: true
    cards:
      - type: vertical-stack
        cards:
          - type: markdown
            #content: '<center> <ha-icon icon="mdi:zigbee"></ha-icon> </center>'
            content: '### <center> ZigBee </center>'
          - type: 'custom:flex-table-card'
            #title: ZigBee
            clickable: false
            entities:
              include: 
                - sensor.*_zigbee
            sort_by: nwk
            #max_rows: 20
            columns:
              - data: friendly_name
                name: Friendly Name
                modify: 'x.replace(/ Zigbee$/,"")'
              - data: ieee
                name: IEEE
                modify: (x+'').toLowerCase()
              - data: nwk
                name: NWK
                modify: (x+'').replace(/^0x/,"").toLowerCase()
              - data: parent
                name: Parent
                modify: (x+'').replace(/^0x/,"").toLowerCase()
              - data: type
                name: Type
                modify: (x+'').replace(/^-$/, "child device")
              - data: msg_received
                name: Received
                modify: 'isNaN(parseInt(x, 10)) ? 0 : parseInt(x, 10)'
              - data: msg_missed
                name: Missed
                modify: 'isNaN(parseInt(x, 10)) ? 0 : parseInt(x, 10)'
              - data: unresponsive
                name: Unresponsive
                modify: 'isNaN(parseInt(x, 10)) ? 0 : parseInt(x, 10)'
              - data: link_quality
                name: LQI
                modify: 'isNaN(parseInt(x, 10)) ? "" : parseInt(x, 10)'
              - data: rssi
                name: RSSI
                modify: 'isNaN(parseInt(x, 10)) ? "" : parseInt(x, 10)'
              - data: last_msg
                name: Last Message
                modify: x+''
              - data: state
                name: Last Seen, min ago
                modify: Math.round((Date.now()-Date.parse(x))/60000) #(Date.now()-Date.parse(x))/60000
                # modify: >
                #   var dt = new Date(0,0,0,0,0,0,(Date.now()-Date.parse(x)));
                #   isFinite(dt) ? dt.toTimeString().split(" ")[0] : ""
            css:
        #      thead th: 'align-content: center;'
              table+: 'padding-top: 15px;'
              'tbody tr:nth-child(even)': 'background-color: #a2542f6;'
              td.left: 'padding: 10px 10px 10px 10px'
              th.left: 'padding: 0px 0px 10px 10px'