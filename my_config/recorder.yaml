#
# SELECT entity_id, COUNT(*) as count FROM states GROUP BY entity_id ORDER BY count DESC LIMIT 100;
#
  db_url: !secret postgresql_url
  purge_keep_days: 5
  auto_purge: false
  commit_interval: 30
  exclude:
    domains:
      - alarm_control_panel
      - camera
      - persistent_notification
      - zone
      - sun
      #- media_player
    entities:
      - automation.system_esphome_ble_advert
      - automation.system_triggered_automations_counter
      - sensor.date
      - sensor.date_time
      - sensor.time 
      - sensor.e72e00d2911f_ble
      - sensor.e72e0120fcdc_ble
      - light.d1mini_domofon_led
      - light.d1mini_air_freshener_led_green
      - light.d1mini_air_freshener_led_red
      - sensor.d1mini_air_freshener_uptime
      - sensor.esp32_node_s_uptime
      - sensor.d1mini_distance_sensor_uptime
      - sensor.d1mini_domofon_uptime
      - sensor.d1mini_light_l_uptime
      #- sensor.d1mini_sim800_uptime
      - sensor.d1mini_strip_mb_uptime
      - sensor.digma_ir_k_uptime
      - sensor.digma_ir_mb_uptime
      - sensor.digma_ir_s_uptime
      - sensor.digma_ir_v_uptime
      - sensor.digma_strip_hb_uptime
      - sensor.esp01_weight_pad_uptime
      - sensor.esp32_ble_hb_uptime
      - sensor.esp32_ble_hs_uptime
      - sensor.esp32_ble_mb_uptime
      - sensor.esp32_ble_s_uptime
      - sensor.esp32_node_b_uptime
      - sensor.esp32_node_hs_uptime
      - sensor.esp32_node_k_uptime
      - sensor.esp32_node_mb_uptime
      - sensor.esp32_node_v_uptime
      - sensor.esp32_pzem_hb_uptime
      - sensor.esp8266_hood_k_uptime
      - sensor.esp8266_oven_temp_k_uptime
      #- sensor.gosund_strip_p1_uptime
      - sensor.lt11_1_uptime
      - sensor.mono_strip_1_uptime
      - sensor.sonoff_5v1c_uptime
      #- sensor.sonoff_basic_1_uptime
      - sensor.sonoff_mini_1_uptime
      - sensor.sonoff_mini_4_uptime
      - sensor.sonoff_pow_r2_1_uptime
      - sensor.sonoff_pow_r2_2_uptime
      
    entity_globs: 
      - sensor.*_zigbee 
      - sensor.*_ble
      - sensor.ble_*
      - binary_sensor.ble_*
    event_types:
      - unifiprotect_motion
      - esphome.on_ble_advertise
      - system_log_event
      
    #   - service_removed
    #   - service_executed
    #   - platform_discovered
    #   - feedreader
    #   - service_registered
    #   - logbook_entry
    #   - system_log_event
    #   - events_pkey
    #   - ix_events_contex_id
    #   - call_service
    #   - component_loaded
    #   - automation_triggered
    #   - script_started
    #   - timer_out_of_sync

# list of all used domains

# {%- for d in states | groupby('domain') %}
# {{ d[0] }}
# {%- endfor %}