#  - platform: ssh
#    name: udmp_wan_state
#    host: !secret udmp_ip
 #   username: !secret udmp_usr
 #   password: !secret udmp_passwd
#    command: !secret udmp_failover_cmd
 #   scan_interval: 30
#    value_template: "{{ value }}"
    # - platform: unifigateway
    #   host: !secret udmp_host
    #   port: 443
    #   version: UDMP-unifiOS
    #   username: !secret udmp_username
    #   password: !secret udmp_password
    #   monitored_conditions:
    #     - www
    #     - wan
    #     #- wlan
    #     #- lan
    #     #- alerts
    #     #- firmware
    #     - vpn

  # - platform: command_line
  #   name: UnifiOS UDMP
  #   command: !secret udmp_unifios
  #   value_template: |-
  #     {% set json = value_json.data[1] %}
  #     {{ json["system-stats"].cpu }}|
  #     {{ json.temperatures[0].value | float(0) | round (1) }}|
  #     {{ json["system-stats"].mem }}|
  #     {{ json.internet }}|
  #     {{ json.startup_timestamp | timestamp_custom('%Y-%m-%dT%H:%M:%S') }}|
  #   scan_interval: 60

  # - platform: command_line
  #   name: UnifiOS USW16
  #   command: !secret udmp_unifios
  #   value_template: |-
  #     {% set json = value_json.data[0] %}
  #     {{ json["system-stats"].cpu }}|
  #     {{ json["system-stats"].mem }}|
  #     {{ json.fan_level }}|
  #     {{ json.general_temperature }}|
  #     {{ json.startup_timestamp | timestamp_custom('%Y-%m-%dT%H:%M:%S') }}
  #     {{ json.overheating }}
  #   scan_interval: 60

  - platform: command_line
    name: UnifiOS State
    command: !secret udmp_unifios
    unique_id: unifios_state
    value_template: |-
      {{ value_json.data[0]["system-stats"].cpu }}|
      {{ value_json.data[0].temperatures[0].value | float(0) | round (1) }}|
      {{ value_json.data[0]["system-stats"].mem }}|
      {{ value_json.data[0].internet }}|
      {{ value_json.data[0].startup_timestamp | timestamp_custom('%Y-%m-%dT%H:%M:%S') }}|
      {{ value_json.data[9]["system-stats"].cpu }}|
      {{ value_json.data[9]["system-stats"].mem }}|
      {{ value_json.data[9].fan_level }}|
      {{ value_json.data[9].general_temperature }}|
      {{ value_json.data[9].startup_timestamp | timestamp_custom('%Y-%m-%dT%H:%M:%S') }}|
      {{ value_json.data[9].overheating }}|
      {{ value_json.data[0]["sys_stats"].loadavg_1 }}|
      {{ value_json.data[0]["sys_stats"].loadavg_5 }}|
      {{ value_json.data[0]["sys_stats"].loadavg_15 }}|
      {{ value_json.data[0]["sys_stats"].mem_total }}|
      {{ value_json.data[0]["sys_stats"].mem_used }}|
      {{ value_json.data[0]["sys_stats"].mem_buffer }}|
      {{ value_json.data[0].storage[1].used }}
    scan_interval: 30

  # - platform: unifi_status
  #   host: !secret udmp_host
  #   username: !secret udmp_usr
  #   password: !secret udmp_passwd
  #   monitored_conditions:
  #     - vpn
  #     - www
  #     - lan
  #     - wan
  #     - wlan
  #     - firmware